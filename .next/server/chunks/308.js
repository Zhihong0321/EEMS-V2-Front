"use strict";exports.id=308,exports.ids=[308],exports.modules={90422:(t,e,a)=>{a.d(e,{AF:()=>o,NX:()=>l,a1:()=>i});var r=a(17577),n=a(18069),s=a(11004);function i(t=[]){let{push:e}=(0,s.p)(),[a,i]=(0,r.useState)(t),[o,l]=(0,r.useState)(0===t.length),[c,u]=(0,r.useState)(null),d=(0,r.useCallback)(async()=>{l(!0);try{let t=await (0,n.Mf)();i(t),u(null)}catch(a){let t=a instanceof Error?a.message:"Failed to load simulators";u(t),e({title:"Unable to load simulators",description:t,variant:"error"})}finally{l(!1)}},[e]),f=(0,r.useCallback)(async t=>{try{let a=await (0,n.ji)(t);return await d(),e({title:"Simulator created",description:`${a.name} is ready to run.`,variant:"success"}),a}catch(a){let t=a instanceof Error?a.message:"Failed to create simulator";throw console.error("Create simulator failed",a),e({title:"Create simulator failed",description:t,variant:"error"}),a}},[e,d]),h=(0,r.useCallback)(async t=>{try{await (0,n.aj)(t),i(e=>e.filter(e=>e.id!==t)),d(),e({title:"Simulator deleted",variant:"success"})}catch(r){let t="Delete failed",a="Failed to delete simulator";throw r instanceof Error&&(404===r.status?(t="Delete not supported",a="Backend DELETE endpoint not implemented. Contact backend team to add DELETE /api/v1/simulators/{id}"):500===r.status||502===r.status||503===r.status?(t="Server error",a="The backend server encountered an error. Please try again."):401===r.status||403===r.status?(t="Permission denied",a="You don't have permission to delete this simulator"):r.status?a=r.message:(t="Connection failed",a="Could not connect to the server. Check your internet connection.")),console.error("Delete simulator failed",r),e({title:t,description:a,variant:"error"}),r}},[e,d]);return(0,r.useMemo)(()=>({simulators:a,loading:o,error:c,refresh:d,create:f,delete:h}),[a,o,c,d,f,h])}function o(t,e={},a=null){let{push:i,dismiss:o}=(0,s.p)(),{onAlert80pct:l,onWindowChange:c}=e,[u,d]=(0,r.useState)({block:a,loading:!a&&!!t,error:null,connected:!1,reconnecting:!1,lastReadingTs:void 0});(0,r.useRef)(!1),(0,r.useRef)(null);let f=(0,r.useCallback)(async()=>{if(t){d(t=>({...t,loading:null==t.block}));try{let e=await (0,n.lA)(t);d(t=>({...t,block:e,loading:!1,error:null}))}catch(e){let t=e instanceof Error?e.message:"Failed to load latest block";d(e=>({...e,loading:!1,error:t})),i({title:"Unable to load latest block",description:t,variant:"error"})}finally{d(t=>({...t,loading:!1}))}}},[t,i]);return{block:u.block,loading:u.loading,error:u.error,connected:u.connected,reconnecting:u.reconnecting,lastReadingTs:u.lastReadingTs,refresh:f}}function l(t,e=10,a=[]){let{push:i}=(0,s.p)(),[o,l]=(0,r.useState)(a),[c,u]=(0,r.useState)(!!t&&0===a.length),[d,f]=(0,r.useState)(null);return{history:o,loading:c,error:d,refresh:(0,r.useCallback)(async()=>{if(t){u(!0);try{let a=await (0,n.QY)(t,e);l(a),f(null)}catch(e){let t=e instanceof Error?e.message:"Failed to load block history";f(t),i({title:"Unable to load block history",description:t,variant:"error"})}finally{u(!1)}}},[e,i,t])}}console.log("\uD83D\uDE80 [HOOKS] Hooks file loaded, notificationManager imported:",!!a(13798).O)},9905:(t,e,a)=>{a.d(e,{QY:()=>h,lA:()=>f,Mf:()=>d}),process.env.NEXT_PUBLIC_BACKEND_WRITE_TOKEN,process.env.NEXT_PUBLIC_BACKEND_KEY,process.env.NEXT_PUBLIC_BACKEND_API_KEY;let r="/api/bridge",n=new Set([429,500,502,503,504]);class s extends Error{constructor(t,e,a,r){super(t),this.status=e,this.code=a,this.details=r}}async function i(t){let e=await t.text();if(e)try{return JSON.parse(e)}catch(e){throw new s(`Invalid JSON response: ${e.message}`,t.status)}}async function o(t){let e;try{e=await t.clone().json()}catch{}if(!e)try{let e=await t.text();if(e)return new s(e,t.status)}catch{}let a=e?.error?.message??e?.message??t.statusText??`Request failed with status ${t.status}`,r=e?.error?.code,n=e?.error?.details;if(e&&e.detail){n=e.detail;try{if(Array.isArray(e.detail)){let t=e.detail.map(t=>t?.msg||t?.detail||"Validation error").filter(Boolean);t.length>0&&(a=t.join("; "))}else"string"==typeof e.detail&&(a=e.detail)}catch{}}return new s(a,t.status,r,n)}function l(t){return new Promise(e=>setTimeout(e,t))}async function c(t,e,a={}){let c=function(t){if(!r)throw new s("Backend base URL is not configured.",0);return t.startsWith("http")?t:`${r}${t}`}(t);c=`http://localhost${c}`;let u=a.retryDelays??[],d=0,f=new Headers(e?.headers);f.set("Accept","application/json");let h={...e,headers:f};for(;;)try{let t=await fetch(c,h);if(!t.ok){var y;let e=await o(t);if(y=t.status,n.has(y)&&d<u.length){await l(u[d++]);continue}throw e}if(204===t.status)return;return await i(t)}catch(t){if(t instanceof s)throw t;if(d<u.length){await l(u[d++]);continue}throw t}}async function u(t,e){try{return await c(t,e)}catch(a){if(!(a instanceof s))return await c(t,e,{retryDelays:[500]});throw a}}async function d(){let t=await u("/api/v1/simulators");return Array.isArray(t)?t:t.data??[]}async function f(t){return await u(`/api/v1/blocks/latest?simulator_id=${encodeURIComponent(t)}`)}async function h(t,e=10){let a=await u(`/api/v1/blocks/history?simulator_id=${encodeURIComponent(t)}&limit=${e}`);return Array.isArray(a)?a:a.data??[]}}};