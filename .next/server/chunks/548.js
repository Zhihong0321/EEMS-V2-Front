"use strict";exports.id=548,exports.ids=[548],exports.modules={42898:(e,t,a)=>{a.d(t,{l:()=>x});var s=a(10326),r=a(17577);let l=r.forwardRef(function({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"}))});var n=a(2505);let i=r.forwardRef(function({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))});var d=a(91664),c=a(41190);let o=new Intl.NumberFormat(void 0,{maximumFractionDigits:0}),m=new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit"});function x({baseKw:e,onBaseKwChange:t,volatility:a,onVolatilityChange:r,isRunning:x,onStart:u,onStop:h,sentCount:p,lastSentAt:g,disabled:f,disabledReason:w}){let j=g?m.format(new Date(g)):"—";return(0,s.jsxs)("article",{className:"flex flex-col gap-6 rounded-2xl border border-slate-800 bg-slate-900/60 backdrop-blur-sm p-6 shadow-md hover:shadow-lg transition-shadow duration-300",children:[(0,s.jsxs)("header",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-white",children:"Auto mode"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Emit one tick every second with gaussian noise. Fast-forward mode advances simulated time by 30 seconds per real second."})]}),s.jsx(l,{className:"h-8 w-8 text-cyan-500","aria-hidden":"true"})]}),(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,s.jsxs)("label",{className:"flex flex-col gap-2 text-sm",children:[s.jsx("span",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Base kW"}),s.jsx(c.II,{type:"number",min:0,step:1,value:e,onChange:e=>{t(Number(e.target.value))}})]}),(0,s.jsxs)("label",{className:"flex flex-col gap-2 text-sm",children:[s.jsx("span",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Volatility %"}),s.jsx(c.II,{type:"number",min:0,max:100,step:1,value:a,onChange:e=>{r(Math.max(0,Math.min(100,Number(e.target.value))))}})]})]}),(0,s.jsxs)("div",{className:"rounded-lg border border-slate-800 bg-slate-950/60 p-4 text-xs text-slate-400",children:[(0,s.jsxs)("p",{children:["Next tick interval: ",s.jsx("span",{className:"font-semibold text-slate-200",children:"1 second"})]}),(0,s.jsxs)("p",{className:"mt-1",children:["Expected power window: ",s.jsx("span",{className:"font-semibold text-slate-200",children:o.format(Math.max(0,Math.round(e*(1-a/100))))})," – "," ",s.jsx("span",{className:"font-semibold text-slate-200",children:o.format(Math.round(e*(1+a/100)))})," kW"]})]}),s.jsx(d.z,{variant:x?"danger":"primary",size:"md",onClick:x?h:u,disabled:f,className:"w-full",children:x?(0,s.jsxs)(s.Fragment,{children:[s.jsx(n.Z,{className:"h-4 w-4","aria-hidden":"true"})," Stop auto run"]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(i,{className:"h-4 w-4","aria-hidden":"true"})," Start auto run"]})}),f&&w?s.jsx("p",{className:"text-xs text-warning",children:w}):null,(0,s.jsxs)("dl",{className:"grid grid-cols-2 gap-4 rounded-lg border border-slate-800 bg-slate-950/60 p-4 text-xs text-slate-400",children:[(0,s.jsxs)("div",{children:[s.jsx("dt",{className:"uppercase tracking-[0.2em] text-slate-600",children:"Ticks sent"}),s.jsx("dd",{className:"mt-1 text-sm text-slate-200",children:p})]}),(0,s.jsxs)("div",{children:[s.jsx("dt",{className:"uppercase tracking-[0.2em] text-slate-600",children:"Last tick"}),s.jsx("dd",{className:"mt-1 text-sm text-slate-200",children:j})]})]})]})}},54053:(e,t,a)=>{a.d(t,{x:()=>o});var s=a(10326),r=a(17577);let l=r.forwardRef(function({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.59 14.37a6 6 0 0 1-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 0 0 6.16-12.12A14.98 14.98 0 0 0 9.631 8.41m5.96 5.96a14.926 14.926 0 0 1-5.841 2.58m-.119-8.54a6 6 0 0 0-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 0 0-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 0 1-2.448-2.448 14.9 14.9 0 0 1 .06-.312m-2.24 2.39a4.493 4.493 0 0 0-1.757 4.306 4.493 4.493 0 0 0 4.306-1.758M16.5 9a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"}))});var n=a(2505),i=a(91664),d=a(41190);let c=new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit"});function o({sliderValue:e,onSliderChange:t,maxKw:a,onMaxKwChange:r,isRunning:o,onStart:m,onStop:x,sentCount:u,lastSentAt:h,disabled:p,disabledReason:g}){let f=Math.max(0,e*a),w=h?c.format(new Date(h)):"—";return(0,s.jsxs)("article",{className:"flex flex-col gap-6 rounded-2xl border border-slate-800 bg-slate-900/60 backdrop-blur-sm p-6 shadow-md hover:shadow-lg transition-shadow duration-300",children:[(0,s.jsxs)("header",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-white",children:"Manual fast-forward"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Emit one tick per second using the selected power multiplier."})]}),s.jsx(l,{className:"h-8 w-8 text-purple-400","aria-hidden":"true"})]}),(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-[minmax(0,2fr)_1fr]",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsxs)("label",{className:"flex flex-col gap-2 text-sm",children:[s.jsx("span",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Adjust load multiplier"}),s.jsx("input",{type:"range",min:0,max:1,step:.01,value:e,onChange:e=>{t(Number(e.target.value))},className:"w-full"}),(0,s.jsxs)("span",{className:"text-xs text-slate-400",children:["FAST-FORWARD x30 — Multiplier ",(100*e).toFixed(0),"%"]})]}),(0,s.jsxs)("label",{className:"flex flex-col gap-2 text-sm",children:[s.jsx("span",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Max power (kW)"}),s.jsx(d.II,{type:"number",min:0,step:5,value:a,onChange:e=>{r(Math.max(0,Number(e.target.value)))}})]})]}),(0,s.jsxs)("div",{className:"rounded-lg border border-slate-800 bg-slate-950/60 p-4 text-xs text-slate-400",children:[(0,s.jsxs)("p",{children:["Current output: ",s.jsx("span",{className:"font-semibold text-slate-200",children:f.toFixed(1)})," kW"]}),(0,s.jsxs)("p",{className:"mt-1",children:["Ticks are emitted every ",s.jsx("span",{className:"font-semibold text-slate-200",children:"1 second"})," with ",s.jsx("span",{className:"font-semibold text-slate-200",children:"sample_seconds=30"}),". Fast-forward mode advances simulated time by 30 seconds per real second."]})]})]}),s.jsx(i.z,{variant:o?"danger":"primary",size:"md",onClick:o?x:m,disabled:p,className:"w-full",children:o?(0,s.jsxs)(s.Fragment,{children:[s.jsx(n.Z,{className:"h-4 w-4","aria-hidden":"true"})," Stop manual run"]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(l,{className:"h-4 w-4","aria-hidden":"true"})," Start manual run"]})}),p&&g?s.jsx("p",{className:"text-xs text-warning",children:g}):null,(0,s.jsxs)("dl",{className:"grid grid-cols-2 gap-4 rounded-lg border border-slate-800 bg-slate-950/60 p-4 text-xs text-slate-400",children:[(0,s.jsxs)("div",{children:[s.jsx("dt",{className:"uppercase tracking-[0.2em] text-slate-600",children:"Ticks sent"}),s.jsx("dd",{className:"mt-1 text-sm text-slate-200",children:u})]}),(0,s.jsxs)("div",{children:[s.jsx("dt",{className:"uppercase tracking-[0.2em] text-slate-600",children:"Last tick"}),s.jsx("dd",{className:"mt-1 text-sm text-slate-200",children:w})]})]})]})}},902:(e,t,a)=>{a.d(t,{V:()=>i,o:()=>d});var s=a(17577),r=a(18069),l=a(11004);function n({simulatorId:e,intervalMs:t,mode:a,getTick:n,fastForwardEnabled:i=!1,onTickSent:d}){let{push:c}=(0,l.p)(),[o,m]=(0,s.useState)(!1),[x,u]=(0,s.useState)(0),[h,p]=(0,s.useState)(void 0),g=(0,s.useRef)(null),f=(0,s.useRef)(0),w=(0,s.useRef)(()=>{}),j=(0,s.useRef)(null),b=(0,s.useRef)(n),v=(0,s.useCallback)(()=>{g.current&&(clearInterval(g.current),g.current=null),m(!1),j.current=null},[]),N=(0,s.useCallback)(async()=>{if(!e)return;let s=b.current();if(i){let e=new Date;if(j.current){let e=t/1e3*30;j.current=new Date(j.current.getTime()+1e3*e)}else j.current=new Date(e);s={...s,device_ts:j.current.toISOString()}}try{await (0,r.M8)({simulator_id:e,mode:a,ticks:[s]}),f.current=0,u(e=>e+1),p(s.device_ts),d?.(s);let t=`recent_ticks_${e}`,l=JSON.parse(localStorage.getItem(t)||"[]");l.push({ts:Date.now(),...s}),l.length>180&&l.shift(),localStorage.setItem(t,JSON.stringify(l))}catch(t){f.current+=1;let e=t instanceof Error?t.message:"Failed to deliver reading";1===f.current&&c({title:"Reading delivery failed",description:e,variant:"error"}),f.current>=3&&(v(),c({title:"Emitter paused",description:`Stopped ${a} emitter after repeated failures.`,variant:"error",action:{label:"Retry now",onClick:()=>w.current()}}))}},[i,t,a,d,c,e,v]);return{isRunning:o,sentCount:x,lastSentAt:h,start:(0,s.useCallback)(async()=>{if(!e){c({title:"No simulator selected",description:"Create or pick a simulator before sending readings.",variant:"error"});return}if(!g.current){(0,r.Aq)(e).catch(e=>{console.warn("Failed to delete future readings:",e)});try{let t=await (0,r.he)(e);t&&i?j.current=new Date(t):i&&(j.current=new Date)}catch(e){console.warn("Failed to get last reading timestamp, starting from current time:",e),i&&(j.current=new Date)}f.current=0,m(!0),N(),g.current=setInterval(()=>{N()},t)}},[i,t,c,N,e]),stop:v}}function i(e,t,a,r=!1,l){return n({simulatorId:e,intervalMs:2e3,mode:"auto",getTick:(0,s.useCallback)(()=>({power_kw:Number(Math.max(0,t*(1+Math.max(0,Math.min(a,100))/100*(2*Math.random()-1))).toFixed(3)),sample_seconds:30,device_ts:new Date().toISOString()}),[t,a]),fastForwardEnabled:r,onTickSent:l})}function d(e,t,a=!1,r){return n({simulatorId:e,intervalMs:2e3,mode:"manual",getTick:(0,s.useCallback)(()=>({power_kw:Number(Math.max(0,t()).toFixed(3)),sample_seconds:30,device_ts:new Date().toISOString()}),[t]),fastForwardEnabled:a,onTickSent:r})}},2505:(e,t,a)=>{a.d(t,{Z:()=>r});var s=a(17577);let r=s.forwardRef(function({title:e,titleId:t,...a},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"}))})}};