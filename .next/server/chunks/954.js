"use strict";exports.id=954,exports.ids=[954],exports.modules={91664:(t,e,a)=>{a.d(e,{z:()=>o});var r=a(10326),n=a(17577),s=a(41135);let i={variant:{primary:"bg-primary text-white shadow-sm hover:bg-cyan-600 hover:shadow-md active:scale-95",secondary:"border border-slate-700 bg-transparent text-slate-200 hover:bg-slate-800 hover:border-slate-600",ghost:"hover:bg-slate-800/50 text-slate-300 hover:text-white",danger:"bg-danger text-white shadow-sm hover:bg-red-600 hover:shadow-md active:scale-95",success:"bg-success text-white shadow-sm hover:bg-green-600 hover:shadow-md active:scale-95"},size:{sm:"px-3 py-1.5 text-xs min-h-[36px]",md:"px-4 py-2 text-sm min-h-[44px]",lg:"px-6 py-3 text-base min-h-[48px]"}},o=(0,n.forwardRef)(({className:t,variant:e="primary",size:a="md",isLoading:n,children:o,disabled:l,...c},u)=>(0,r.jsxs)("button",{className:(0,s.Z)("inline-flex items-center justify-center gap-2 rounded-md font-semibold transition-all duration-150","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950","disabled:pointer-events-none disabled:opacity-50",i.variant[e],i.size[a],t),ref:u,disabled:l||n,...c,children:[n&&(0,r.jsxs)("svg",{className:"h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{className:n?"opacity-70":"",children:o})]}));o.displayName="Button"},4753:(t,e,a)=>{a.d(e,{Dr:()=>o,HM:()=>d,Oz:()=>u,Qu:()=>f,tQ:()=>y,w:()=>h,wC:()=>c,wE:()=>l});let r=[{name:"NEXT_PUBLIC_BACKEND_TOKEN",value:"01121000099"},{name:"NEXT_PUBLIC_BACKEND_WRITE_TOKEN",value:process.env.NEXT_PUBLIC_BACKEND_WRITE_TOKEN},{name:"NEXT_PUBLIC_BACKEND_KEY",value:process.env.NEXT_PUBLIC_BACKEND_KEY},{name:"NEXT_PUBLIC_BACKEND_API_KEY",value:process.env.NEXT_PUBLIC_BACKEND_API_KEY}],n=null,s=!1;function i(){for(let t of r)if(t.value)return{name:t.name,value:t.value};return null}function o(){return i()?.value??""}function l(){return i()?.name??null}function c(){return s&&!!n}function u(t,e){n=t.trim()||null,s=!!(e?.persist&&n)}function d(){n=null,s=!1}function h(){return n||o()}function f(){return h().length>0}function y(){return o().length>0}},18069:(t,e,a)=>{a.d(e,{Aq:()=>E,Bj:()=>y,CT:()=>n,LK:()=>f,M8:()=>_,Mf:()=>w,QY:()=>v,aj:()=>m,b0:()=>h,he:()=>b,ji:()=>p,lA:()=>g});var r=a(4753);let n="/api/bridge",s=new Set([429,500,502,503,504]);class i extends Error{constructor(t,e,a,r){super(t),this.status=e,this.code=a,this.details=r}}function o(t){if(!n)throw new i("Backend base URL is not configured.",0);return t.startsWith("http")?t:`${n}${t}`}async function l(t){let e=await t.text();if(e)try{return JSON.parse(e)}catch(e){throw new i(`Invalid JSON response: ${e.message}`,t.status)}}async function c(t){let e;try{e=await t.clone().json()}catch{}if(!e)try{let e=await t.text();if(e)return new i(e,t.status)}catch{}let a=e?.error?.message??e?.message??t.statusText??`Request failed with status ${t.status}`,r=e?.error?.code,n=e?.error?.details;if(e&&e.detail){n=e.detail;try{if(Array.isArray(e.detail)){let t=e.detail.map(t=>t?.msg||t?.detail||"Validation error").filter(Boolean);t.length>0&&(a=t.join("; "))}else"string"==typeof e.detail&&(a=e.detail)}catch{}}return new i(a,t.status,r,n)}function u(t){return new Promise(e=>setTimeout(e,t))}async function d(t,e,a={}){let r=o(t);r=`http://localhost${r}`;let n=a.retryDelays??[],d=0,h=new Headers(e?.headers);h.set("Accept","application/json");let f={...e,headers:h};for(;;)try{let t=await fetch(r,f);if(!t.ok){var y;let e=await c(t);if(y=t.status,s.has(y)&&d<n.length){await u(n[d++]);continue}throw e}if(204===t.status)return;return await l(t)}catch(t){if(t instanceof i)throw t;if(d<n.length){await u(n[d++]);continue}throw t}}function h(t){let e=new Headers(t?.headers);e.set("Content-Type","application/json");let a=(0,r.w)();return a?e.set("x-api-key",a):e.delete("x-api-key"),{...t,headers:e}}async function f(t,e){try{return await d(t,e)}catch(a){if(!(a instanceof i))return await d(t,e,{retryDelays:[500]});throw a}}function y(t){return o(t)}async function w(){let t=await f("/api/v1/simulators");return Array.isArray(t)?t:t.data??[]}async function p(t){let e=await d("/api/v1/simulators",h({method:"POST",body:JSON.stringify(t)}),{retryDelays:[500,1500,3500]});return"data"in e?e.data:e}async function m(t){console.log("deleteSimulator called with id:",t);try{await d(`/api/v1/simulators/${t}`,h({method:"DELETE"}),{retryDelays:[500,1500]}),console.log("deleteSimulator successful for id:",t)}catch(e){throw console.error("deleteSimulator error for id:",t,e),e}}async function g(t){return await f(`/api/v1/blocks/latest?simulator_id=${encodeURIComponent(t)}`)}async function v(t,e=10){let a=await f(`/api/v1/blocks/history?simulator_id=${encodeURIComponent(t)}&limit=${e}`);return Array.isArray(a)?a:a.data??[]}async function _(t){await d("/api/v1/readings:ingest",h({method:"POST",body:JSON.stringify(t)}),{retryDelays:[500,1500,3500]})}async function E(t){try{let e=new Date().toISOString();await d(`/api/v1/readings?simulator_id=${encodeURIComponent(t)}&before=${encodeURIComponent(e)}`,h({method:"DELETE"}),{retryDelays:[500,1500]})}catch(e){try{await d(`/api/v1/simulators/${encodeURIComponent(t)}/readings`,h({method:"DELETE"}),{retryDelays:[500,1500]})}catch(t){console.warn("Failed to delete future readings from backend:",e,t)}}}async function b(t){try{let e=await g(t);if(e.chart_bins?.points&&e.chart_bins.points.length>0){let t=new Date(e.block_start_local),a=e.chart_bins.bin_seconds||30,r=e.chart_bins.points.length;return new Date(t.getTime()+r*a*1e3).toISOString()}return null}catch(t){return console.warn("Failed to fetch last reading timestamp:",t),null}}},9905:(t,e,a)=>{a.d(e,{QY:()=>f,lA:()=>h,Mf:()=>d}),process.env.NEXT_PUBLIC_BACKEND_WRITE_TOKEN,process.env.NEXT_PUBLIC_BACKEND_KEY,process.env.NEXT_PUBLIC_BACKEND_API_KEY;let r="/api/bridge",n=new Set([429,500,502,503,504]);class s extends Error{constructor(t,e,a,r){super(t),this.status=e,this.code=a,this.details=r}}async function i(t){let e=await t.text();if(e)try{return JSON.parse(e)}catch(e){throw new s(`Invalid JSON response: ${e.message}`,t.status)}}async function o(t){let e;try{e=await t.clone().json()}catch{}if(!e)try{let e=await t.text();if(e)return new s(e,t.status)}catch{}let a=e?.error?.message??e?.message??t.statusText??`Request failed with status ${t.status}`,r=e?.error?.code,n=e?.error?.details;if(e&&e.detail){n=e.detail;try{if(Array.isArray(e.detail)){let t=e.detail.map(t=>t?.msg||t?.detail||"Validation error").filter(Boolean);t.length>0&&(a=t.join("; "))}else"string"==typeof e.detail&&(a=e.detail)}catch{}}return new s(a,t.status,r,n)}function l(t){return new Promise(e=>setTimeout(e,t))}async function c(t,e,a={}){let c=function(t){if(!r)throw new s("Backend base URL is not configured.",0);return t.startsWith("http")?t:`${r}${t}`}(t);c=`http://localhost${c}`;let u=a.retryDelays??[],d=0,h=new Headers(e?.headers);h.set("Accept","application/json");let f={...e,headers:h};for(;;)try{let t=await fetch(c,f);if(!t.ok){var y;let e=await o(t);if(y=t.status,n.has(y)&&d<u.length){await l(u[d++]);continue}throw e}if(204===t.status)return;return await i(t)}catch(t){if(t instanceof s)throw t;if(d<u.length){await l(u[d++]);continue}throw t}}async function u(t,e){try{return await c(t,e)}catch(a){if(!(a instanceof s))return await c(t,e,{retryDelays:[500]});throw a}}async function d(){let t=await u("/api/v1/simulators");return Array.isArray(t)?t:t.data??[]}async function h(t){return await u(`/api/v1/blocks/latest?simulator_id=${encodeURIComponent(t)}`)}async function f(t,e=10){let a=await u(`/api/v1/blocks/history?simulator_id=${encodeURIComponent(t)}&limit=${e}`);return Array.isArray(a)?a:a.data??[]}}};