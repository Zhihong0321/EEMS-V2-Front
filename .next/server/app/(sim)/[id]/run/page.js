(()=>{var e={};e.id=998,e.ids=[998],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},26325:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),s(86512),s(35866),s(53871);var r=s(23191),n=s(88716),a=s(37922),o=s.n(a),i=s(95231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);s.d(t,l);let d=["",{children:["(sim)",{children:["[id]",{children:["run",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,86512)),"E:\\EEMS-Front\\src\\app\\(sim)\\[id]\\run\\page.tsx"]}]},{}]},{}]},{"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,53871)),"E:\\EEMS-Front\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["E:\\EEMS-Front\\src\\app\\(sim)\\[id]\\run\\page.tsx"],u="/(sim)/[id]/run/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(sim)/[id]/run/page",pathname:"/[id]/run",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},25993:(e,t,s)=>{Promise.resolve().then(s.bind(s,42266))},42266:(e,t,s)=>{"use strict";s.d(t,{SimulatorRunContent:()=>d});var r=s(10326),n=s(17577),a=s(90434),o=s(42898),i=s(54053),l=s(902);function d({simulatorId:e,simulatorName:t,targetKwh:s}){let[d,c]=(0,n.useState)(320),[u,m]=(0,n.useState)(12),[x,p]=(0,n.useState)(.5),[g,h]=(0,n.useState)(800),f=(0,n.useMemo)(()=>x*g,[x,g]),b=(0,l.V)(e,d,u),y=(0,l.o)(e,()=>f),v=()=>{b.isRunning?b.stop():(y.stop(),b.start())},j=()=>{y.isRunning?y.stop():(b.stop(),y.start())};return(0,r.jsxs)("section",{className:"space-y-10",children:[(0,r.jsxs)("header",{className:"flex flex-wrap items-end justify-between gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-500",children:"Simulator controls"}),r.jsx("h1",{className:"text-3xl font-semibold text-white",children:t}),r.jsx("p",{className:"text-sm text-slate-400",children:"Configure auto and manual emitters. Only one mode can run at a time to avoid duplicate ticks."}),(0,r.jsxs)("p",{className:"text-xs text-slate-500",children:["Target block: ",s?`${s} kWh`:"â€”"," \xb7 Timezone ","Asia/Kuala_Lumpur"]})]}),r.jsx(a.default,{href:{pathname:"/sim/[id]",query:{id:e}},className:"inline-flex items-center rounded-md border border-slate-700 px-4 py-2 text-sm font-semibold text-slate-200 transition hover:border-slate-500 hover:text-white",children:"Back to dashboard"})]}),(0,r.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[r.jsx(o.l,{baseKw:d,onBaseKwChange:c,volatility:u,onVolatilityChange:m,isRunning:b.isRunning,onStart:v,onStop:v,sentCount:b.sentCount,lastSentAt:b.lastSentAt,disabled:y.isRunning,disabledReason:y.isRunning?"Manual emitter is active. Stop it before running auto mode.":void 0}),r.jsx(i.x,{sliderValue:x,onSliderChange:p,maxKw:g,onMaxKwChange:h,isRunning:y.isRunning,onStart:j,onStop:j,sentCount:y.sentCount,lastSentAt:y.lastSentAt,disabled:b.isRunning,disabledReason:b.isRunning?"Auto emitter is active. Stop it before running manual mode.":void 0})]}),(0,r.jsxs)("p",{className:"text-xs text-slate-500",children:["Auto mode sends gaussianised readings every 15 seconds; manual fast-forward emits every second with ",r.jsx("code",{className:"rounded bg-slate-800 px-1 py-0.5",children:"sample_seconds=30"})," so the backend advances by 30 seconds per tick (30x speed)."]})]})}},41190:(e,t,s)=>{"use strict";s.d(t,{II:()=>i,Ph:()=>l,SP:()=>d});var r=s(10326),n=s(17577),a=s(41135),o=s(19381);let i=(0,n.forwardRef)(({className:e,error:t,success:s,...n},o)=>r.jsx("input",{className:(0,a.Z)("w-full rounded-md border px-3 py-2 text-sm text-white transition-colors duration-150","placeholder:text-slate-500","focus:outline-none focus:ring-2","disabled:opacity-50 disabled:cursor-not-allowed",t?"border-danger bg-danger/5 focus:border-danger focus:ring-danger/20":s?"border-success bg-success/5 focus:border-success focus:ring-success/20":"border-slate-800 bg-slate-950/60 focus:border-primary focus:ring-primary/20",e),ref:o,...n}));i.displayName="Input";let l=(0,n.forwardRef)(({className:e,error:t,success:s,children:n,...o},i)=>r.jsx("select",{className:(0,a.Z)("w-full rounded-md border px-3 py-2 text-sm text-white transition-colors duration-150","focus:outline-none focus:ring-2","disabled:opacity-50 disabled:cursor-not-allowed",t?"border-danger bg-danger/5 focus:border-danger focus:ring-danger/20":s?"border-success bg-success/5 focus:border-success focus:ring-success/20":"border-slate-800 bg-slate-950/60 focus:border-primary focus:ring-primary/20",e),ref:i,...o,children:n}));function d({label:e,error:t,helperText:s,required:n,children:a}){return(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-slate-300",children:[e,n&&r.jsx("span",{className:"text-danger ml-1",children:"*"})]}),a,t&&(0,r.jsxs)("p",{className:"text-xs text-danger flex items-center gap-1",children:[r.jsx(o.Z,{className:"h-4 w-4","aria-hidden":"true"}),t]}),!t&&s&&r.jsx("p",{className:"text-xs text-slate-500",children:s})]})}l.displayName="Select"},86512:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(19510),n=s(68570);let a=(0,n.createProxy)(String.raw`E:\EEMS-Front\src\components\run\simulator-run-content.tsx`),{__esModule:o,$$typeof:i}=a;a.default;let l=(0,n.createProxy)(String.raw`E:\EEMS-Front\src\components\run\simulator-run-content.tsx#SimulatorRunContent`);var d=s(9905);async function c({params:e}){let t;let s=e.id,n=`Simulator ${s}`;try{let e=(await (0,d.Mf)()).find(e=>e.id===s);e&&(n=e.name,t=e.target_kwh)}catch(e){console.error("Failed to load simulator metadata",e)}return r.jsx(l,{simulatorId:s,simulatorName:n,targetKwh:t})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,808,987,954,548],()=>s(26325));module.exports=r})();