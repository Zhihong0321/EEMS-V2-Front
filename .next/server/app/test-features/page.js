(()=>{var e={};e.id=508,e.ids=[508],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7180:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),s(8729),s(4337),s(5866);var r=s(3191),a=s(8716),n=s(7922),i=s.n(n),l=s(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["test-features",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8729)),"E:\\EEMS-Front\\src\\app\\test-features\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,4337)),"E:\\EEMS-Front\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["E:\\EEMS-Front\\src\\app\\test-features\\page.tsx"],u="/test-features/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/test-features/page",pathname:"/test-features",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4707:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},707:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,9404,23)),Promise.resolve().then(s.bind(s,1004))},6538:(e,t,s)=>{Promise.resolve().then(s.bind(s,4595))},4595:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var r=s(326),a=s(7577);let n=process.env.NEXT_PUBLIC_WHATSAPP_API_URL||"https://whatsapp-api-server-production-c15f.up.railway.app";async function i(e){try{let t=await fetch(`${n}/api/send`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({to:e.to,message:e.message})});if(!t.ok){let e=await t.text();return{success:!1,error:`Failed to send message: ${t.status} ${t.statusText}. ${e}`}}let s=await t.json();return{success:!0,message:s.message||"Message sent successfully"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error occurred"}}}async function l(){try{let e=await fetch(`${n}/api/status`,{method:"GET",headers:{Accept:"application/json"}});if(!e.ok)return{status:"error",connected:!1};let t=await e.json();return{status:t.status||"unknown",connected:!0===t.connected}}catch(e){return{status:"error",connected:!1}}}async function o(){try{let e=await fetch(`${n}/api/qr`,{method:"GET"});if(!e.ok)return null;let t=await e.blob();return new Promise(e=>{let s=new FileReader;s.onloadend=()=>e(s.result),s.readAsDataURL(t)})}catch(e){return null}}var c=s(1004);let d=a.forwardRef(function({title:e,titleId:t,...s},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}),u=a.forwardRef(function({title:e,titleId:t,...s},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5h.75v.75h-.75v-.75ZM13.5 19.5h.75v.75h-.75v-.75ZM19.5 13.5h.75v.75h-.75v-.75ZM19.5 19.5h.75v.75h-.75v-.75ZM16.5 16.5h.75v.75h-.75v-.75Z"}))});function x(){let{push:e}=(0,c.p)(),[t,s]=(0,a.useState)(""),[n,x]=(0,a.useState)(""),[m,p]=(0,a.useState)(!1),[h,b]=(0,a.useState)(null),[g,f]=(0,a.useState)(null),[v,j]=(0,a.useState)(!1),[y,w]=(0,a.useState)(!1),N=async()=>{if(!t.trim()||!n.trim()){e({title:"Validation Error",description:"Please enter both recipient number and message",variant:"error"});return}p(!0);try{let s=await i({to:t.trim(),message:n.trim()});s.success?(e({title:"Message Sent",description:s.message||"WhatsApp message sent successfully",variant:"success"}),x("")):e({title:"Failed to Send",description:s.error||"Unknown error occurred",variant:"error"})}catch(t){e({title:"Error",description:t instanceof Error?t.message:"Failed to send message",variant:"error"})}finally{p(!1)}},E=async()=>{j(!0);try{let t=await l();b(t),e({title:"Status Checked",description:`WhatsApp is ${t.connected?"connected":"not connected"}. Status: ${t.status}`,variant:t.connected?"success":"warning"})}catch(t){e({title:"Error",description:t instanceof Error?t.message:"Failed to check status",variant:"error"})}finally{j(!1)}},P=async()=>{w(!0);try{let t=await o();t?(f(t),e({title:"QR Code Loaded",description:"Scan this QR code with WhatsApp to link your device",variant:"success"})):e({title:"Error",description:"Failed to load QR code",variant:"error"})}catch(t){e({title:"Error",description:t instanceof Error?t.message:"Failed to get QR code",variant:"error"})}finally{w(!1)}};return(0,r.jsxs)("section",{className:"space-y-8",children:[(0,r.jsxs)("header",{children:[r.jsx("h1",{className:"text-3xl font-semibold text-white",children:"Test Features"}),r.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Test WhatsApp notification features and API integration"})]}),(0,r.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,r.jsxs)("article",{className:"rounded-2xl border border-slate-800 bg-slate-900/60 p-6",children:[(0,r.jsxs)("header",{className:"mb-6",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[r.jsx(d,{className:"h-6 w-6"}),"Send WhatsApp Message"]}),r.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Send a test message to a WhatsApp number"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Recipient Number"}),r.jsx("input",{type:"tel",value:t,onChange:e=>s(e.target.value),placeholder:"+1234567890",className:"w-full rounded-md border border-slate-700 bg-slate-800 px-4 py-2 text-sm text-white placeholder:text-slate-500 focus:border-purple-400 focus:outline-none",disabled:m}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Include country code (e.g., +60123456789)"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Message"}),r.jsx("textarea",{value:n,onChange:e=>x(e.target.value),placeholder:"Enter your message here...",rows:5,className:"w-full rounded-md border border-slate-700 bg-slate-800 px-4 py-2 text-sm text-white placeholder:text-slate-500 focus:border-purple-400 focus:outline-none resize-none",disabled:m})]}),r.jsx("button",{onClick:N,disabled:m||!t.trim()||!n.trim(),className:"w-full rounded-md bg-primary px-4 py-2 text-sm font-medium text-white transition hover:bg-primary/90 disabled:cursor-not-allowed disabled:opacity-50 disabled:hover:bg-primary min-h-[44px]",children:m?"Sending...":"Send Message"})]})]}),(0,r.jsxs)("article",{className:"rounded-2xl border border-slate-800 bg-slate-900/60 p-6",children:[(0,r.jsxs)("header",{className:"mb-6",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[r.jsx(u,{className:"h-6 w-6"}),"WhatsApp Connection"]}),r.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Check connection status and get QR code"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("button",{onClick:E,disabled:v,className:"w-full rounded-md border border-slate-700 bg-slate-800 px-4 py-2 text-sm font-medium text-slate-200 transition hover:bg-slate-700 disabled:cursor-not-allowed disabled:opacity-50 min-h-[44px]",children:v?"Checking...":"Check Connection Status"}),h&&(0,r.jsxs)("div",{className:"mt-3 rounded-md border border-slate-700 bg-slate-800/50 p-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-slate-300",children:"Status:"}),r.jsx("span",{className:`text-sm font-medium ${h.connected?"text-green-400":"text-red-400"}`,children:h.connected?"Connected":"Not Connected"})]}),(0,r.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-slate-300",children:"State:"}),r.jsx("span",{className:"text-sm text-slate-200",children:h.status})]})]})]}),(0,r.jsxs)("div",{children:[r.jsx("button",{onClick:P,disabled:y,className:"w-full rounded-md border border-slate-700 bg-slate-800 px-4 py-2 text-sm font-medium text-slate-200 transition hover:bg-slate-700 disabled:cursor-not-allowed disabled:opacity-50 min-h-[44px]",children:y?"Loading...":"Get QR Code"}),g&&r.jsx("div",{className:"mt-3 flex justify-center",children:r.jsx("img",{src:g,alt:"WhatsApp QR Code",className:"rounded-md border border-slate-700 max-w-full"})})]})]})]})]}),(0,r.jsxs)("div",{className:"rounded-lg border border-slate-800 bg-slate-900/60 p-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-200 mb-2",children:"API Information"}),(0,r.jsxs)("div",{className:"text-xs text-slate-400 space-y-1",children:[(0,r.jsxs)("p",{children:[r.jsx("strong",{children:"API URL:"})," ",process.env.NEXT_PUBLIC_WHATSAPP_API_URL||"https://whatsapp-api-server-production-c15f.up.railway.app"]}),r.jsx("p",{children:r.jsx("strong",{children:"Endpoints:"})}),(0,r.jsxs)("ul",{className:"list-disc list-inside ml-2 space-y-1",children:[r.jsx("li",{children:"POST /api/send - Send WhatsApp message"}),r.jsx("li",{children:"GET /api/status - Get connection status"}),r.jsx("li",{children:"GET /api/qr - Get QR code for device linking"})]})]})]})]})}},1004:(e,t,s)=>{"use strict";s.d(t,{ToastProvider:()=>l,p:()=>o});var r=s(326),a=s(7577),n=s(1135);let i=(0,a.createContext)(void 0);function l({children:e}){let[t,s]=(0,a.useState)([]),n=(0,a.useCallback)(e=>{let t=`${Date.now()}-${Math.random().toString(36).slice(2,8)}`;return s(s=>[...s,{...e,id:t}]),t},[]),l=(0,a.useCallback)(e=>{s(t=>t.filter(t=>t.id!==e))},[]),o=(0,a.useCallback)(()=>s([]),[]),d=(0,a.useMemo)(()=>({toasts:t,push:n,dismiss:l,clear:o}),[t,n,l,o]);return(0,r.jsxs)(i.Provider,{value:d,children:[e,r.jsx(c,{toasts:t,onDismiss:l})]})}function o(){let e=(0,a.useContext)(i);if(!e)throw Error("useToast must be used within a ToastProvider");return e}function c({toasts:e,onDismiss:t}){return r.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-4 z-50 flex flex-col items-end gap-3 px-4 sm:items-end sm:px-6",children:e.map(e=>r.jsx(d,{toast:e,onDismiss:t},e.id))})}function d({toast:e,onDismiss:t}){let s=e.variant??"default";return r.jsx("div",{className:(0,n.Z)("pointer-events-auto w-full max-w-sm rounded-lg px-4 py-3 shadow-lg ring-1 ring-black/20 backdrop-blur","success"===s?"bg-emerald-500/90 text-white":"error"===s?"bg-red-500/90 text-white":"warning"===s?"bg-amber-500/90 text-black":"bg-slate-800/90 text-white"),role:"status",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsxs)("div",{className:"flex-1 space-y-1",children:[r.jsx("p",{className:"text-sm font-semibold leading-tight",children:e.title}),e.description?r.jsx("p",{className:"text-xs leading-tight",children:e.description}):null,e.action?r.jsx("button",{type:"button",onClick:()=>{e.action?.onClick(),t(e.id)},className:"mt-2 inline-flex rounded-md border border-white/30 px-2 py-1 text-xs font-semibold text-white transition hover:border-white hover:bg-white/10",children:e.action.label}):null]}),(e.dismissible??!0)&&r.jsx("button",{type:"button",onClick:()=>t(e.id),className:"-m-1 rounded-md p-1 text-xs opacity-70 transition hover:opacity-100","aria-label":"Dismiss notification",children:"✕"})]})})}},4337:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u,metadata:()=>d});var r=s(9510),a=s(7371);s(5023);var n=s(8570);let i=(0,n.createProxy)(String.raw`E:\EEMS-Front\src\components\ui\toast-provider.tsx`),{__esModule:l,$$typeof:o}=i;i.default;let c=(0,n.createProxy)(String.raw`E:\EEMS-Front\src\components\ui\toast-provider.tsx#ToastProvider`);(0,n.createProxy)(String.raw`E:\EEMS-Front\src\components\ui\toast-provider.tsx#useToast`);let d={title:"Eternalgy EMS",description:"Prototype UI for Eternalgy's energy management simulator"};function u({children:e}){return r.jsx("html",{lang:"en",className:"bg-slate-950",children:r.jsx("body",{className:"flex min-h-screen flex-col",children:r.jsx(c,{children:(0,r.jsxs)("div",{className:"flex grow flex-col",children:[r.jsx("header",{className:"border-b border-slate-800 bg-slate-900/80 backdrop-blur",children:(0,r.jsxs)("div",{className:"mx-auto flex w-full max-w-6xl items-center justify-between gap-6 px-6 py-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"inline-flex h-10 w-10 items-center justify-center rounded-lg bg-primary text-lg font-semibold text-primary-foreground",children:"EE"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm uppercase tracking-[0.2em] text-slate-400",children:"Eternalgy EMS"}),r.jsx("p",{className:"font-semibold text-slate-100",children:"Simulator Prototype"})]})]}),(0,r.jsxs)("nav",{className:"flex flex-1 items-center justify-end gap-4 text-sm text-slate-400",children:[r.jsx(a.default,{href:"/",className:"rounded-md px-3 py-2 transition hover:bg-slate-800/80 hover:text-white",children:"Simulators"}),r.jsx(a.default,{href:"/health",className:"rounded-md px-3 py-2 transition hover:bg-slate-800/80 hover:text-white",children:"Health check"}),r.jsx(a.default,{href:"/test-features",className:"rounded-md px-3 py-2 transition hover:bg-slate-800/80 hover:text-white",children:"Test Features"}),(0,r.jsxs)("span",{className:"rounded-md border border-slate-800 px-3 py-2 text-slate-400",children:["Timezone: ","Asia/Kuala_Lumpur"]})]})]})}),r.jsx("main",{className:"mx-auto w-full max-w-6xl flex-1 px-6 py-10",children:e}),r.jsx("footer",{className:"border-t border-slate-800 bg-slate-900/80",children:(0,r.jsxs)("div",{className:"mx-auto flex w-full max-w-6xl items-center justify-between px-6 py-4 text-xs text-slate-500",children:[(0,r.jsxs)("span",{children:["\xa9 ",new Date().getFullYear()," Eternalgy Energy Management Simulator"]}),r.jsx("span",{children:"Prototype build — App Router"})]})})]})})})})}},8729:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>l});var r=s(8570);let a=(0,r.createProxy)(String.raw`E:\EEMS-Front\src\app\test-features\page.tsx`),{__esModule:n,$$typeof:i}=a;a.default;let l=(0,r.createProxy)(String.raw`E:\EEMS-Front\src\app\test-features\page.tsx#default`)},5023:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,485],()=>s(7180));module.exports=r})();