"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[516],{57516:function(e,t,s){s.d(t,{fn:function(){return L}});var a=s(57437),r=s(2265),i=s(89733),l=s(77209),n=s(48185),o=s(18910),c=s(87381);function d(e){var t,s;let{simulatorId:d,trigger:h,onSave:m,onCancel:x,isLoading:u=!1}=e,[g,f]=(0,r.useState)({phoneNumber:(null==h?void 0:h.phoneNumber)||"",thresholdPercentage:(null==h?void 0:null===(t=h.thresholdPercentage)||void 0===t?void 0:t.toString())||"",isActive:null===(s=null==h?void 0:h.isActive)||void 0===s||s}),[p,b]=(0,r.useState)({}),[j,v]=(0,r.useState)(!1),[N,w]=(0,r.useState)(!1),y=!!h;(0,r.useEffect)(()=>{h?f({phoneNumber:h.phoneNumber,thresholdPercentage:h.thresholdPercentage.toString(),isActive:h.isActive}):f({phoneNumber:"",thresholdPercentage:"",isActive:!0}),b({}),w(!1)},[h]);let S=(e,t)=>{switch(e){case"phoneNumber":if(!t||"string"!=typeof t||""===t.trim())return"Phone number is required";let s=(0,o.Y0)(t);return s.isValid?void 0:s.error;case"thresholdPercentage":if(!t||"string"!=typeof t||""===t.trim())return"Threshold percentage is required";let a=(0,o.c4)(t);return a.isValid?void 0:a.error;default:return}},k=(e,t)=>{if(f(s=>({...s,[e]:t})),w(!0),p[e]&&b(t=>({...t,[e]:void 0})),"phoneNumber"===e||"thresholdPercentage"===e){let s=S(e,t);s?(b(t=>({...t,[e]:s})),console.log("Validation error for ".concat(e,":"),s)):console.log("Validation passed for ".concat(e,":"),t)}},E=()=>{let e={},t=S("phoneNumber",g.phoneNumber);t&&(e.phoneNumber=t);let s=S("thresholdPercentage",g.thresholdPercentage);return s&&(e.thresholdPercentage=s),b(e),0===Object.keys(e).length},C=async e=>{if(e.preventDefault(),E()){v(!0),b({});try{let e=parseFloat(g.thresholdPercentage);if(y&&h){let t={phoneNumber:g.phoneNumber,thresholdPercentage:e,isActive:g.isActive},s=await c.O.updateTrigger(h.id,t);m(s)}else{let t={simulatorId:d,phoneNumber:g.phoneNumber,thresholdPercentage:e,isActive:g.isActive},s=await c.O.createTrigger(t);m(s)}}catch(e){console.error("Error saving trigger:",e),b({general:e instanceof Error?e.message:"Failed to save trigger"})}finally{v(!1)}}};return(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:y?"Edit Notification Trigger":"Create Notification Trigger"}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:y?"Update the notification settings for this trigger":"Set up a new WhatsApp notification when energy usage exceeds the threshold"})]}),(0,a.jsx)(n.aY,{children:(0,a.jsxs)("form",{onSubmit:C,className:"space-y-6",children:[p.general&&(0,a.jsx)("div",{className:"p-3 rounded-md bg-danger/10 border border-danger/20",children:(0,a.jsx)("p",{className:"text-sm text-danger",children:p.general})}),!1,(0,a.jsx)(l.SP,{label:"WhatsApp Phone Number",error:p.phoneNumber,helperText:"Enter phone number with country code (e.g., 60123456789)",required:!0,children:(0,a.jsx)(l.II,{type:"tel",value:g.phoneNumber,onChange:e=>k("phoneNumber",e.target.value),placeholder:"60123456789",error:!!p.phoneNumber,disabled:j||u})}),g.phoneNumber&&!p.phoneNumber&&(0,a.jsxs)("div",{className:"text-xs text-slate-400",children:["Formatted: ",(e=>{if(!e)return e;let t=(0,o.Y0)(e);return t.isValid&&t.formattedNumber?(0,o.We)(t.formattedNumber):e})(g.phoneNumber)]}),(0,a.jsx)(l.SP,{label:"Threshold Percentage",error:p.thresholdPercentage,helperText:"Notification will be sent when usage reaches this percentage (1-200%)",required:!0,children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(l.II,{type:"number",min:"1",max:"200",step:"0.1",value:g.thresholdPercentage,onChange:e=>k("thresholdPercentage",e.target.value),placeholder:"80",error:!!p.thresholdPercentage,disabled:j||u,className:"pr-8"}),(0,a.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm",children:"%"})]})}),(0,a.jsx)(l.SP,{label:"Status",helperText:"Enable or disable this notification trigger",children:(0,a.jsxs)(l.Ph,{value:g.isActive?"active":"inactive",onChange:e=>k("isActive","active"===e.target.value),disabled:j||u,children:[(0,a.jsx)("option",{value:"active",children:"Active - Notifications enabled"}),(0,a.jsx)("option",{value:"inactive",children:"Inactive - Notifications disabled"})]})}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)(i.z,{type:"submit",isLoading:j,disabled:u||!g.phoneNumber.trim()||!g.thresholdPercentage.trim(),className:"flex-1",children:j?y?"Updating...":"Creating...":y?"Update Trigger":"Create Trigger"}),(0,a.jsx)(i.z,{type:"button",variant:"secondary",onClick:()=>{(!N||window.confirm("You have unsaved changes. Are you sure you want to cancel?"))&&x()},disabled:j||u,children:"Cancel"})]})]})})]})}var h=s(85130);let m=r.forwardRef(function(e,t){let{title:s,titleId:a,...i}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},i),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}),x=r.forwardRef(function(e,t){let{title:s,titleId:a,...i}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},i),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.636 5.636a9 9 0 1 0 12.728 0M12 3v9"}))}),u=r.forwardRef(function(e,t){let{title:s,titleId:a,...i}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},i),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}),g=r.forwardRef(function(e,t){let{title:s,titleId:a,...i}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},i),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))});var f=s(11853),p=s(44839);function b(e){let{trigger:t,onEdit:s,onDelete:l,onToggle:c,isLoading:d}=e,[f,b]=(0,r.useState)(!1),[j,v]=(0,r.useState)(!1),N=async()=>{if(window.confirm("Are you sure you want to delete this notification trigger?\n\nPhone: ".concat((0,o.We)(t.phoneNumber),"\nThreshold: ").concat(t.thresholdPercentage,"%\n\nThis action cannot be undone."))){b(!0);try{await l(t.id)}catch(e){console.error("Error deleting trigger:",e)}finally{b(!1)}}},w=async()=>{v(!0);try{await c(t.id,!t.isActive)}catch(e){console.error("Error toggling trigger:",e)}finally{v(!1)}},y=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,a.jsx)(n.Zb,{className:(0,p.Z)("transition-all duration-200",t.isActive?"border-slate-700 bg-slate-900/60":"border-slate-800 bg-slate-900/30 opacity-75"),children:(0,a.jsx)(n.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsxs)("div",{className:(0,p.Z)("flex items-center gap-1.5 px-2 py-1 rounded-full text-xs font-medium",t.isActive?"bg-success/10 text-success border border-success/20":"bg-slate-700/50 text-slate-400 border border-slate-700"),children:[t.isActive?(0,a.jsx)(h.Z,{className:"h-3 w-3"}):(0,a.jsx)(m,{className:"h-3 w-3"}),t.isActive?"Active":"Inactive"]}),(0,a.jsxs)("div",{className:"px-2 py-1 rounded-full bg-primary/10 text-primary border border-primary/20 text-xs font-medium",children:[t.thresholdPercentage,"% threshold"]})]}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-white",children:(0,o.We)(t.phoneNumber)}),(0,a.jsxs)("p",{className:"text-xs text-slate-400",children:["WhatsApp notifications when usage ≥ ",t.thresholdPercentage,"%"]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-4 text-xs text-slate-500",children:[(0,a.jsxs)("span",{children:["Created: ",y(t.createdAt)]}),t.updatedAt!==t.createdAt&&(0,a.jsxs)("span",{children:["Updated: ",y(t.updatedAt)]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.z,{variant:"ghost",size:"sm",onClick:w,disabled:d||j||f,isLoading:j,className:(0,p.Z)("h-8 w-8 p-0",t.isActive?"text-slate-400 hover:text-orange-400":"text-slate-500 hover:text-success"),title:t.isActive?"Disable notifications":"Enable notifications",children:(0,a.jsx)(x,{className:"h-4 w-4"})}),(0,a.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>s(t),disabled:d||j||f,className:"h-8 w-8 p-0 text-slate-400 hover:text-primary",title:"Edit trigger",children:(0,a.jsx)(u,{className:"h-4 w-4"})}),(0,a.jsx)(i.z,{variant:"ghost",size:"sm",onClick:N,disabled:d||j||f,isLoading:f,className:"h-8 w-8 p-0 text-slate-400 hover:text-danger",title:"Delete trigger",children:(0,a.jsx)(g,{className:"h-4 w-4"})})]})]})})})}function j(e){let{triggers:t,onEdit:s,onDelete:l,onToggle:o,isLoading:c=!1}=e,[d,h]=(0,r.useState)("created"),[m,x]=(0,r.useState)("all"),u=t.filter(e=>"all"===m||("active"===m?e.isActive:!e.isActive)).sort((e,t)=>{switch(d){case"threshold":return e.thresholdPercentage-t.thresholdPercentage;case"status":return Number(t.isActive)-Number(e.isActive);default:return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()}}),g=t.filter(e=>e.isActive).length,p=t.filter(e=>!e.isActive).length;return 0===t.length?(0,a.jsx)(n.Zb,{children:(0,a.jsxs)(n.aY,{className:"p-8 text-center",children:[(0,a.jsx)(f.Z,{className:"h-12 w-12 text-slate-500 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"No Notification Triggers"}),(0,a.jsx)("p",{className:"text-slate-400 mb-4",children:"You haven't set up any WhatsApp notification triggers yet."}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Create your first trigger to receive alerts when energy usage exceeds your specified thresholds."})]})}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(n.Zb,{children:(0,a.jsx)(n.Ol,{className:"pb-4",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Notification Triggers"}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-slate-400 mt-1",children:[(0,a.jsxs)("span",{children:[t.length," total"]}),(0,a.jsxs)("span",{className:"text-success",children:[g," active"]}),(0,a.jsxs)("span",{className:"text-slate-500",children:[p," inactive"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("select",{value:m,onChange:e=>x(e.target.value),className:"px-3 py-1.5 text-sm rounded-md border border-slate-700 bg-slate-800 text-white focus:border-primary focus:outline-none",disabled:c,children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"active",children:"Active Only"}),(0,a.jsx)("option",{value:"inactive",children:"Inactive Only"})]}),(0,a.jsxs)("select",{value:d,onChange:e=>h(e.target.value),className:"px-3 py-1.5 text-sm rounded-md border border-slate-700 bg-slate-800 text-white focus:border-primary focus:outline-none",disabled:c,children:[(0,a.jsx)("option",{value:"created",children:"Sort by Created"}),(0,a.jsx)("option",{value:"threshold",children:"Sort by Threshold"}),(0,a.jsx)("option",{value:"status",children:"Sort by Status"})]})]})]})})}),0===u.length?(0,a.jsx)(n.Zb,{children:(0,a.jsx)(n.aY,{className:"p-6 text-center",children:(0,a.jsx)("p",{className:"text-slate-400",children:"No triggers match the current filter criteria."})})}):(0,a.jsx)("div",{className:"space-y-3",children:u.map(e=>(0,a.jsx)(b,{trigger:e,onEdit:s,onDelete:l,onToggle:o,isLoading:c},e.id))}),t.length>1&&(0,a.jsx)(n.Zb,{children:(0,a.jsx)(n.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-slate-400",children:"Bulk Actions"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>{let e=t.filter(e=>!e.isActive);0!==e.length&&window.confirm("Enable notifications for ".concat(e.length," inactive trigger(s)?"))&&e.forEach(e=>o(e.id,!0))},disabled:c||0===p,className:"text-success hover:text-success",children:"Enable All"}),(0,a.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>{let e=t.filter(e=>e.isActive);0!==e.length&&window.confirm("Disable notifications for ".concat(e.length," active trigger(s)?"))&&e.forEach(e=>o(e.id,!1))},disabled:c||0===g,className:"text-orange-400 hover:text-orange-300",children:"Disable All"})]})]})})})]})}var v=s(39519);let N=r.forwardRef(function(e,t){let{title:s,titleId:a,...i}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},i),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))});var w=s(76218);function y(e){let{history:t}=e,[s,i]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),d=async e=>{c(!0);try{let t=await fetch("/api/whatsapp/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:e.phoneNumber,message:"\uD83D\uDD04 Retry Test - EMS Alert: Usage was ".concat(e.actualPercentage.toFixed(1),"% (threshold: ").concat(e.thresholdPercentage,"%)\n\nThis is a manual retry of a previously failed notification.\nTime: ").concat(new Date().toLocaleString())})}),s=await t.json();s.success?alert("✅ Retry successful! Message sent to ".concat(e.phoneNumber)):alert("❌ Retry failed: ".concat(s.error||"Unknown error"))}catch(e){console.error("Retry error:",e),alert("❌ Retry failed: ".concat(e instanceof Error?e.message:"Network error"))}finally{c(!1)}};return(0,a.jsx)(n.Zb,{className:(0,p.Z)("transition-all duration-200",t.success?"border-slate-700 bg-slate-900/60":"border-red-900/30 bg-red-900/10"),children:(0,a.jsx)(n.aY,{className:"p-4",children:(0,a.jsx)("div",{className:"flex items-start justify-between gap-4",children:(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsxs)("div",{className:(0,p.Z)("flex items-center gap-1.5 px-2 py-1 rounded-full text-xs font-medium border",t.success?"text-success bg-success/10 border-success/20":"text-danger bg-danger/10 border-danger/20"),children:[t.success?(0,a.jsx)(h.Z,{className:"h-3 w-3"}):(0,a.jsx)(v.Z,{className:"h-3 w-3"}),t.success?"Sent":"Failed"]}),(0,a.jsxs)("div",{className:"px-2 py-1 rounded-full bg-slate-700/50 text-slate-300 text-xs",children:[t.actualPercentage.toFixed(1),"% / ",t.thresholdPercentage,"%"]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs text-slate-500",children:[(0,a.jsx)(m,{className:"h-3 w-3"}),(e=>{let t=new Date(e),s=new Date,a=s.getTime()-t.getTime(),r=Math.floor(a/6e4),i=Math.floor(a/36e5),l=Math.floor(a/864e5);return r<1?"Just now":r<60?"".concat(r,"m ago"):i<24?"".concat(i,"h ago"):l<7?"".concat(l,"d ago"):t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==s.getFullYear()?"numeric":void 0,hour:"2-digit",minute:"2-digit"})})(t.sentAt)]})]}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-white",children:(0,o.We)(t.phoneNumber)}),(0,a.jsxs)("p",{className:"text-xs text-slate-400",children:["Usage reached ",t.actualPercentage.toFixed(1),"% (threshold: ",t.thresholdPercentage,"%)"]})]}),!t.success&&t.errorMessage&&(0,a.jsx)("div",{className:"mt-2 p-3 rounded bg-red-900/20 border border-red-900/30",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-red-300 mb-1",children:"❌ Notification Failed"}),(0,a.jsx)("p",{className:"text-xs text-red-200",children:t.errorMessage})]}),(0,a.jsx)("button",{onClick:()=>d(t),disabled:l,className:"px-2 py-1 text-xs bg-red-800/50 hover:bg-red-700/50 text-red-200 rounded border border-red-700/50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Retry this notification",children:l?"...":"Retry"})]})}),!t.success&&(0,a.jsx)("button",{onClick:()=>i(!s),className:"mt-2 text-xs text-slate-400 hover:text-slate-300 underline",children:s?"Hide Details":"Show Details"}),s&&!t.success&&(0,a.jsx)("div",{className:"mt-2 p-3 rounded bg-slate-800/50 border border-slate-700",children:(0,a.jsxs)("div",{className:"space-y-2 text-xs",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Trigger ID:"}),(0,a.jsx)("span",{className:"ml-2 text-slate-300 font-mono",children:t.triggerId})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Simulator ID:"}),(0,a.jsx)("span",{className:"ml-2 text-slate-300 font-mono",children:t.simulatorId})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Sent At:"}),(0,a.jsx)("span",{className:"ml-2 text-slate-300",children:new Date(t.sentAt).toLocaleString()})]})]})})]})})})})}function S(e){let{simulatorId:t,limit:s=50}=e,[l,o]=(0,r.useState)([]),[d,h]=(0,r.useState)(!0),[x,u]=(0,r.useState)(null),[g,p]=(0,r.useState)({status:"all",timeRange:"all"});(0,r.useEffect)(()=>{b()},[t,s]);let b=async()=>{try{h(!0),u(null);let e=await c.O.getNotificationHistory(t,s);o(e)}catch(e){console.error("Error loading notification history:",e),u(e instanceof Error?e.message:"Failed to load notification history")}finally{h(!1)}},j=l.filter(e=>{if("all"!==g.status&&!("success"===g.status?e.success:!e.success))return!1;if("all"!==g.timeRange){let t=new Date,s=new Date(e.sentAt),a=t.getTime()-s.getTime();switch(g.timeRange){case"24h":if(a>864e5)return!1;break;case"7d":if(a>6048e5)return!1;break;case"30d":if(a>2592e6)return!1}}return!0}),v=l.filter(e=>e.success).length,S=l.filter(e=>!e.success).length,k=l.length>0?(S/l.length*100).toFixed(1):"0",E=l.filter(e=>!e.success&&e.errorMessage).reduce((e,t)=>{let s=t.errorMessage.split(":")[0]||"Unknown";return e[s]=(e[s]||0)+1,e},{});return d?(0,a.jsx)(n.Zb,{children:(0,a.jsxs)(n.aY,{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-400",children:"Loading notification history..."})]})}):x?(0,a.jsx)(n.Zb,{children:(0,a.jsxs)(n.aY,{className:"p-8 text-center",children:[(0,a.jsx)(f.Z,{className:"h-12 w-12 text-danger mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"Error Loading History"}),(0,a.jsx)("p",{className:"text-slate-400 mb-4",children:x}),(0,a.jsx)(i.z,{onClick:b,variant:"secondary",children:"Try Again"})]})}):0===l.length?(0,a.jsx)(n.Zb,{children:(0,a.jsxs)(n.aY,{className:"p-8 text-center",children:[(0,a.jsx)(m,{className:"h-12 w-12 text-slate-500 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"No Notification History"}),(0,a.jsx)("p",{className:"text-slate-400 mb-4",children:"No notifications have been sent for this simulator yet."}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"History will appear here once notification triggers are activated and thresholds are exceeded."})]})}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(n.Zb,{children:(0,a.jsx)(n.Ol,{className:"pb-4",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Notification History"}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-slate-400 mt-1",children:[(0,a.jsxs)("span",{children:[l.length," total"]}),(0,a.jsxs)("span",{className:"text-success",children:[v," sent"]}),(0,a.jsxs)("span",{className:"text-danger",children:[S," failed"]}),S>0&&(0,a.jsxs)("span",{className:"text-orange-400",children:["(",k,"% failure rate)"]})]}),S>0&&Object.keys(E).length>0&&(0,a.jsxs)("div",{className:"mt-2 p-2 rounded bg-orange-900/20 border border-orange-600/20",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-orange-300 mb-1",children:"Common Issues:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(E).map(e=>{let[t,s]=e;return(0,a.jsxs)("span",{className:"px-2 py-1 text-xs bg-orange-800/30 text-orange-200 rounded",children:[t,": ",s,"x"]},t)})})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(N,{className:"h-4 w-4 text-slate-400"}),(0,a.jsxs)("select",{value:g.status,onChange:e=>p(t=>({...t,status:e.target.value})),className:"px-3 py-1.5 text-sm rounded-md border border-slate-700 bg-slate-800 text-white focus:border-primary focus:outline-none",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"success",children:"Sent Only"}),(0,a.jsx)("option",{value:"failed",children:"Failed Only"})]})]}),(0,a.jsxs)("select",{value:g.timeRange,onChange:e=>p(t=>({...t,timeRange:e.target.value})),className:"px-3 py-1.5 text-sm rounded-md border border-slate-700 bg-slate-800 text-white focus:border-primary focus:outline-none",children:[(0,a.jsx)("option",{value:"all",children:"All Time"}),(0,a.jsx)("option",{value:"24h",children:"Last 24 Hours"}),(0,a.jsx)("option",{value:"7d",children:"Last 7 Days"}),(0,a.jsx)("option",{value:"30d",children:"Last 30 Days"})]}),(0,a.jsxs)(i.z,{variant:"ghost",size:"sm",onClick:()=>{let e=new Blob([["Date,Phone Number,Threshold %,Actual %,Status,Error Message",...j.map(e=>[new Date(e.sentAt).toISOString(),e.phoneNumber,e.thresholdPercentage,e.actualPercentage.toFixed(1),e.success?"Success":"Failed",e.errorMessage||""].map(e=>'"'.concat(e,'"')).join(","))].join("\n")],{type:"text/csv"}),s=URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download="notification-history-".concat(t,"-").concat(new Date().toISOString().split("T")[0],".csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},disabled:0===j.length,className:"flex items-center gap-2",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4"}),"Export CSV"]})]})]})})}),0===j.length?(0,a.jsx)(n.Zb,{children:(0,a.jsx)(n.aY,{className:"p-6 text-center",children:(0,a.jsx)("p",{className:"text-slate-400",children:"No notifications match the current filter criteria."})})}):(0,a.jsx)("div",{className:"space-y-3",children:j.map(e=>(0,a.jsx)(y,{history:e},e.id))}),l.length>=s&&(0,a.jsx)(n.Zb,{children:(0,a.jsx)(n.aY,{className:"p-4 text-center",children:(0,a.jsx)(i.z,{variant:"ghost",onClick:()=>b(),className:"text-slate-400 hover:text-white",children:"Load More History"})})})]})}function k(e){let{settings:t,onSave:s,onCancel:o,isLoading:d=!1}=e,[h,m]=(0,r.useState)({enabledGlobally:t.enabledGlobally,cooldownMinutes:t.cooldownMinutes.toString(),maxDailyNotifications:t.maxDailyNotifications.toString()}),[x,u]=(0,r.useState)({}),[g,f]=(0,r.useState)(!1),[p,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{m({enabledGlobally:t.enabledGlobally,cooldownMinutes:t.cooldownMinutes.toString(),maxDailyNotifications:t.maxDailyNotifications.toString()}),u({}),b(!1)},[t]);let j=(e,t)=>{switch(e){case"cooldownMinutes":if(!t||"string"!=typeof t)return"Cooldown minutes is required";let s=parseInt(t);if(isNaN(s))return"Cooldown must be a valid number";if(s<1)return"Cooldown must be at least 1 minute";if(s>1440)return"Cooldown cannot exceed 1440 minutes (24 hours)";return;case"maxDailyNotifications":if(!t||"string"!=typeof t)return"Max daily notifications is required";let a=parseInt(t);if(isNaN(a))return"Max daily notifications must be a valid number";if(a<1)return"Must allow at least 1 notification per day";if(a>100)return"Cannot exceed 100 notifications per day";return;default:return}},v=(e,t)=>{if(m(s=>({...s,[e]:t})),b(!0),x[e]&&u(t=>({...t,[e]:void 0})),"cooldownMinutes"===e||"maxDailyNotifications"===e){let s=j(e,t);s&&u(t=>({...t,[e]:s}))}},N=()=>{let e={},t=j("cooldownMinutes",h.cooldownMinutes);t&&(e.cooldownMinutes=t);let s=j("maxDailyNotifications",h.maxDailyNotifications);return s&&(e.maxDailyNotifications=s),u(e),0===Object.keys(e).length},w=async e=>{if(e.preventDefault(),N()){f(!0),u({});try{let e={enabledGlobally:h.enabledGlobally,cooldownMinutes:parseInt(h.cooldownMinutes),maxDailyNotifications:parseInt(h.maxDailyNotifications)},t=await c.O.updateSettings(e);s(t)}catch(e){console.error("Error saving settings:",e),u({general:e instanceof Error?e.message:"Failed to save settings"})}finally{f(!1)}}};return(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Notification Settings"}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Configure global notification behavior and rate limiting"})]}),(0,a.jsx)(n.aY,{children:(0,a.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[x.general&&(0,a.jsx)("div",{className:"p-3 rounded-md bg-danger/10 border border-danger/20",children:(0,a.jsx)("p",{className:"text-sm text-danger",children:x.general})}),(0,a.jsx)(l.SP,{label:"Global Notifications",helperText:"Master switch to enable or disable all notifications system-wide",children:(0,a.jsxs)(l.Ph,{value:h.enabledGlobally?"enabled":"disabled",onChange:e=>v("enabledGlobally","enabled"===e.target.value),disabled:g||d,children:[(0,a.jsx)("option",{value:"enabled",children:"✅ Enabled - Notifications will be sent"}),(0,a.jsx)("option",{value:"disabled",children:"❌ Disabled - All notifications paused"})]})}),(0,a.jsxs)(l.SP,{label:"Cooldown Period",error:x.cooldownMinutes,helperText:"Minimum time between notifications for the same trigger (1-1440 minutes)",required:!0,children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(l.II,{type:"number",min:"1",max:"1440",value:h.cooldownMinutes,onChange:e=>v("cooldownMinutes",e.target.value),placeholder:"15",error:!!x.cooldownMinutes,disabled:g||d,className:"pr-20"}),(0,a.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm",children:"minutes"})]}),(0,a.jsxs)("div",{className:"mt-1 text-xs text-slate-500",children:["Current: ",parseInt(h.cooldownMinutes)||0," minutes",parseInt(h.cooldownMinutes)>=60&&" (".concat(Math.floor(parseInt(h.cooldownMinutes)/60),"h ").concat(parseInt(h.cooldownMinutes)%60,"m)")]})]}),(0,a.jsx)(l.SP,{label:"Daily Notification Limit",error:x.maxDailyNotifications,helperText:"Maximum notifications per trigger per day (1-100)",required:!0,children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(l.II,{type:"number",min:"1",max:"100",value:h.maxDailyNotifications,onChange:e=>v("maxDailyNotifications",e.target.value),placeholder:"10",error:!!x.maxDailyNotifications,disabled:g||d,className:"pr-16"}),(0,a.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm",children:"per day"})]})}),(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-slate-800/50 border border-slate-700",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-white mb-3",children:"Settings Preview"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Status:"}),(0,a.jsx)("span",{className:h.enabledGlobally?"text-success":"text-slate-400",children:h.enabledGlobally?"Notifications Enabled":"Notifications Disabled"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Cooldown:"}),(0,a.jsxs)("span",{className:"text-slate-300",children:[parseInt(h.cooldownMinutes)||0," minutes between notifications"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Daily Limit:"}),(0,a.jsxs)("span",{className:"text-slate-300",children:[parseInt(h.maxDailyNotifications)||0," notifications per trigger per day"]})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)(i.z,{type:"submit",isLoading:g,disabled:d||!p||Object.keys(x).length>0,className:"flex-1",children:g?"Saving...":"Save Settings"}),(0,a.jsx)(i.z,{type:"button",variant:"secondary",onClick:()=>{window.confirm("Reset all settings to default values?")&&(m({enabledGlobally:!0,cooldownMinutes:"15",maxDailyNotifications:"10"}),b(!0),u({}))},disabled:g||d,children:"Reset"}),(0,a.jsx)(i.z,{type:"button",variant:"ghost",onClick:()=>{(!p||window.confirm("You have unsaved changes. Are you sure you want to cancel?"))&&o()},disabled:g||d,children:"Cancel"})]})]})})]})}var E=s(23047);let C=r.forwardRef(function(e,t){let{title:s,titleId:a,...i}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},i),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}),A=r.forwardRef(function(e,t){let{title:s,titleId:a,...i}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},i),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))});function L(e){let{simulatorId:t,simulatorName:s}=e,[l,o]=(0,r.useState)([]),[m,x]=(0,r.useState)(null),[u,g]=(0,r.useState)(!0),[b,v]=(0,r.useState)(null),[N,w]=(0,r.useState)("triggers"),[y,L]=(0,r.useState)(null),[Z,D]=(0,r.useState)(null),[M,P]=(0,r.useState)(null);(0,r.useEffect)(()=>{T()},[t]);let T=async()=>{try{g(!0),v(null);let[e,s,a]=await Promise.all([c.O.getTriggersBySimulator(t),c.O.getSettings(),c.O.getSystemStatus()]);o(e),x(s),P(a)}catch(e){console.error("Error loading notification data:",e),v(e instanceof Error?e.message:"Failed to load notification data")}finally{g(!1)}},O=async e=>{Z?o(t=>t.map(t=>t.id===e.id?e:t)):o(t=>[...t,e]),L(null),D(null),P(await c.O.getSystemStatus())},R=async e=>{try{await c.O.deleteTrigger(e),o(t=>t.filter(t=>t.id!==e));let t=await c.O.getSystemStatus();P(t)}catch(e){console.error("Error deleting trigger:",e),alert("Failed to delete trigger: "+(e instanceof Error?e.message:"Unknown error"))}},I=async(e,t)=>{try{let s=await c.O.toggleTrigger(e,t);o(t=>t.map(t=>t.id===e?s:t));let a=await c.O.getSystemStatus();P(a)}catch(e){console.error("Error toggling trigger:",e),alert("Failed to update trigger: "+(e instanceof Error?e.message:"Unknown error"))}},z=async e=>{x(e),L(null),P(await c.O.getSystemStatus())},Y=()=>{L(null),D(null)};return u?(0,a.jsx)(n.Zb,{children:(0,a.jsxs)(n.aY,{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-400",children:"Loading notification system..."})]})}):b?(0,a.jsx)(n.Zb,{children:(0,a.jsxs)(n.aY,{className:"p-8 text-center",children:[(0,a.jsx)(f.Z,{className:"h-12 w-12 text-danger mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"Error Loading Notifications"}),(0,a.jsx)("p",{className:"text-slate-400 mb-4",children:b}),(0,a.jsx)(i.z,{onClick:T,variant:"secondary",children:"Try Again"})]})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(n.Zb,{children:(0,a.jsx)(n.Ol,{children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[(0,a.jsx)(E.Z,{className:"h-6 w-6"}),"WhatsApp Notifications"]}),(0,a.jsx)("p",{className:"text-slate-400 mt-1",children:s?"Manage notifications for ".concat(s):"Simulator: ".concat(t)})]}),M&&(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,a.jsxs)("div",{className:(0,p.Z)("flex items-center gap-1.5 px-2 py-1 rounded-full border",M.whatsappReady?"bg-success/10 text-success border-success/20":"bg-danger/10 text-danger border-danger/20"),children:[M.whatsappReady?(0,a.jsx)(h.Z,{className:"h-3 w-3"}):(0,a.jsx)(f.Z,{className:"h-3 w-3"}),"WhatsApp ",M.whatsappReady?"Ready":"Not Ready"]}),(0,a.jsxs)("div",{className:(0,p.Z)("flex items-center gap-1.5 px-2 py-1 rounded-full border",M.notificationsEnabled?"bg-primary/10 text-primary border-primary/20":"bg-slate-700/50 text-slate-400 border-slate-700"),children:[(0,a.jsx)(E.Z,{className:"h-3 w-3"}),M.notificationsEnabled?"Enabled":"Disabled"]}),(0,a.jsxs)("div",{className:"text-slate-400",children:[M.activeTriggers," / ",M.totalTriggers," active"]})]})]})})}),(0,a.jsx)(n.Zb,{children:(0,a.jsx)(n.aY,{className:"p-0",children:(0,a.jsxs)("div",{className:"flex border-b border-slate-700",children:[(0,a.jsxs)("button",{onClick:()=>w("triggers"),className:(0,p.Z)("flex-1 px-6 py-4 text-sm font-medium transition-colors","triggers"===N?"text-primary border-b-2 border-primary bg-primary/5":"text-slate-400 hover:text-white"),children:["Triggers (",l.length,")"]}),(0,a.jsx)("button",{onClick:()=>w("history"),className:(0,p.Z)("flex-1 px-6 py-4 text-sm font-medium transition-colors","history"===N?"text-primary border-b-2 border-primary bg-primary/5":"text-slate-400 hover:text-white"),children:"History"}),(0,a.jsx)("button",{onClick:()=>w("settings"),className:(0,p.Z)("flex-1 px-6 py-4 text-sm font-medium transition-colors","settings"===N?"text-primary border-b-2 border-primary bg-primary/5":"text-slate-400 hover:text-white"),children:"Settings"})]})})}),"triggers"===N&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Notification Triggers"}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Configure when to send WhatsApp notifications based on energy usage thresholds"})]}),(0,a.jsxs)(i.z,{onClick:()=>{D(null),L("create")},className:"flex items-center gap-2",children:[(0,a.jsx)(C,{className:"h-4 w-4"}),"Add Trigger"]})]}),(0,a.jsx)(j,{triggers:l,onEdit:e=>{D(e),L("edit")},onDelete:R,onToggle:I,isLoading:u})]}),"history"===N&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Notification History"}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"View all sent and failed notifications for this simulator"})]}),(0,a.jsx)(S,{simulatorId:t})]}),"settings"===N&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Notification Settings"}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Configure global notification behavior and rate limiting"})]}),(0,a.jsxs)(i.z,{variant:"ghost",onClick:()=>L("settings"),className:"flex items-center gap-2",children:[(0,a.jsx)(A,{className:"h-4 w-4"}),"Edit Settings"]})]}),m&&(0,a.jsx)(n.Zb,{children:(0,a.jsx)(n.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-white mb-2",children:"Global Status"}),(0,a.jsx)("p",{className:(0,p.Z)("text-sm",m.enabledGlobally?"text-success":"text-slate-400"),children:m.enabledGlobally?"Notifications Enabled":"Notifications Disabled"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-white mb-2",children:"Cooldown Period"}),(0,a.jsxs)("p",{className:"text-sm text-slate-300",children:[m.cooldownMinutes," minutes"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-white mb-2",children:"Daily Limit"}),(0,a.jsxs)("p",{className:"text-sm text-slate-300",children:[m.maxDailyNotifications," per trigger"]})]})]})})})]}),("create"===y||"edit"===y)&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,a.jsx)("div",{className:"w-full max-w-md",children:(0,a.jsx)(d,{simulatorId:t,trigger:Z||void 0,onSave:O,onCancel:Y,isLoading:!1})})}),"settings"===y&&m&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,a.jsx)("div",{className:"w-full max-w-md",children:(0,a.jsx)(k,{settings:m,onSave:z,onCancel:Y})})})]})}},48185:function(e,t,s){s.d(t,{Ol:function(){return o},Zb:function(){return n},aY:function(){return c}});var a=s(57437),r=s(2265),i=s(44839);let l={default:"bg-slate-900/60",elevated:"bg-slate-900 shadow-lg",interactive:"cursor-pointer hover:border-primary-700 hover:shadow-lg",flat:"shadow-none"},n=(0,r.forwardRef)((e,t)=>{let{className:s,variant:r="default",...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.Z)("rounded-xl border border-slate-800 backdrop-blur-sm shadow-md transition-shadow duration-200",l[r],s),...n})});n.displayName="Card";let o=(0,r.forwardRef)((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.Z)("p-4 sm:p-6 border-b border-slate-800",s),...r})});o.displayName="CardHeader";let c=(0,r.forwardRef)((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.Z)("p-4 sm:p-6",s),...r})});c.displayName="CardContent",(0,r.forwardRef)((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.Z)("p-4 sm:p-6 border-t border-slate-800",s),...r})}).displayName="CardFooter"},23047:function(e,t,s){var a=s(2265);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...i}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},i),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))});t.Z=r},85130:function(e,t,s){var a=s(2265);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...i}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},i),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});t.Z=r},11853:function(e,t,s){var a=s(2265);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...i}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},i),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))});t.Z=r},39519:function(e,t,s){var a=s(2265);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...i}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},i),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});t.Z=r},44839:function(e,t,s){t.Z=function(){for(var e,t,s=0,a="",r=arguments.length;s<r;s++)(e=arguments[s])&&(t=function e(t){var s,a,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t){if(Array.isArray(t)){var i=t.length;for(s=0;s<i;s++)t[s]&&(a=e(t[s]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a)}return r}(e))&&(a&&(a+=" "),a+=t);return a}}}]);