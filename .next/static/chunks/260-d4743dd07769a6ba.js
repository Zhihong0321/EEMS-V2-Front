"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[260],{84686:function(e,t,a){a.d(t,{l:function(){return u}});var s=a(57437),r=a(2265);let l=r.forwardRef(function(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"}))});var n=a(58151);let i=r.forwardRef(function(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))});var c=a(89733),d=a(77209);let o=new Intl.NumberFormat(void 0,{maximumFractionDigits:0}),m=new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit"});function u(e){let{baseKw:t,onBaseKwChange:a,volatility:r,onVolatilityChange:u,isRunning:x,onStart:h,onStop:p,sentCount:g,lastSentAt:f,disabled:w,disabledReason:j}=e,v=f?m.format(new Date(f)):"—";return(0,s.jsxs)("article",{className:"flex flex-col gap-6 rounded-2xl border border-slate-800 bg-slate-900/60 backdrop-blur-sm p-6 shadow-md hover:shadow-lg transition-shadow duration-300",children:[(0,s.jsxs)("header",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Auto mode"}),(0,s.jsx)("p",{className:"text-sm text-slate-400",children:"Emit one tick every second with gaussian noise. Fast-forward mode advances simulated time by 30 seconds per real second."})]}),(0,s.jsx)(l,{className:"h-8 w-8 text-cyan-500","aria-hidden":"true"})]}),(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,s.jsxs)("label",{className:"flex flex-col gap-2 text-sm",children:[(0,s.jsx)("span",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Base kW"}),(0,s.jsx)(d.II,{type:"number",min:0,step:1,value:t,onChange:e=>{a(Number(e.target.value))}})]}),(0,s.jsxs)("label",{className:"flex flex-col gap-2 text-sm",children:[(0,s.jsx)("span",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Volatility %"}),(0,s.jsx)(d.II,{type:"number",min:0,max:100,step:1,value:r,onChange:e=>{u(Math.max(0,Math.min(100,Number(e.target.value))))}})]})]}),(0,s.jsxs)("div",{className:"rounded-lg border border-slate-800 bg-slate-950/60 p-4 text-xs text-slate-400",children:[(0,s.jsxs)("p",{children:["Next tick interval: ",(0,s.jsx)("span",{className:"font-semibold text-slate-200",children:"1 second"})]}),(0,s.jsxs)("p",{className:"mt-1",children:["Expected power window: ",(0,s.jsx)("span",{className:"font-semibold text-slate-200",children:o.format(Math.max(0,Math.round(t*(1-r/100))))})," – "," ",(0,s.jsx)("span",{className:"font-semibold text-slate-200",children:o.format(Math.round(t*(1+r/100)))})," kW"]})]}),(0,s.jsx)(c.z,{variant:x?"danger":"primary",size:"md",onClick:x?p:h,disabled:w,className:"w-full",children:x?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.Z,{className:"h-4 w-4","aria-hidden":"true"})," Stop auto run"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i,{className:"h-4 w-4","aria-hidden":"true"})," Start auto run"]})}),w&&j?(0,s.jsx)("p",{className:"text-xs text-warning",children:j}):null,(0,s.jsxs)("dl",{className:"grid grid-cols-2 gap-4 rounded-lg border border-slate-800 bg-slate-950/60 p-4 text-xs text-slate-400",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"uppercase tracking-[0.2em] text-slate-600",children:"Ticks sent"}),(0,s.jsx)("dd",{className:"mt-1 text-sm text-slate-200",children:g})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"uppercase tracking-[0.2em] text-slate-600",children:"Last tick"}),(0,s.jsx)("dd",{className:"mt-1 text-sm text-slate-200",children:v})]})]})]})}},17166:function(e,t,a){a.d(t,{x:function(){return o}});var s=a(57437),r=a(2265);let l=r.forwardRef(function(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.59 14.37a6 6 0 0 1-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 0 0 6.16-12.12A14.98 14.98 0 0 0 9.631 8.41m5.96 5.96a14.926 14.926 0 0 1-5.841 2.58m-.119-8.54a6 6 0 0 0-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 0 0-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 0 1-2.448-2.448 14.9 14.9 0 0 1 .06-.312m-2.24 2.39a4.493 4.493 0 0 0-1.757 4.306 4.493 4.493 0 0 0 4.306-1.758M16.5 9a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"}))});var n=a(58151),i=a(89733),c=a(77209);let d=new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit"});function o(e){let{sliderValue:t,onSliderChange:a,maxKw:r,onMaxKwChange:o,isRunning:m,onStart:u,onStop:x,sentCount:h,lastSentAt:p,disabled:g,disabledReason:f}=e,w=Math.max(0,t*r),j=p?d.format(new Date(p)):"—";return(0,s.jsxs)("article",{className:"flex flex-col gap-6 rounded-2xl border border-slate-800 bg-slate-900/60 backdrop-blur-sm p-6 shadow-md hover:shadow-lg transition-shadow duration-300",children:[(0,s.jsxs)("header",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Manual fast-forward"}),(0,s.jsx)("p",{className:"text-sm text-slate-400",children:"Emit one tick per second using the selected power multiplier."})]}),(0,s.jsx)(l,{className:"h-8 w-8 text-purple-400","aria-hidden":"true"})]}),(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-[minmax(0,2fr)_1fr]",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsxs)("label",{className:"flex flex-col gap-2 text-sm",children:[(0,s.jsx)("span",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Adjust load multiplier"}),(0,s.jsx)("input",{type:"range",min:0,max:1,step:.01,value:t,onChange:e=>{a(Number(e.target.value))},className:"w-full"}),(0,s.jsxs)("span",{className:"text-xs text-slate-400",children:["FAST-FORWARD x30 — Multiplier ",(100*t).toFixed(0),"%"]})]}),(0,s.jsxs)("label",{className:"flex flex-col gap-2 text-sm",children:[(0,s.jsx)("span",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Max power (kW)"}),(0,s.jsx)(c.II,{type:"number",min:0,step:5,value:r,onChange:e=>{o(Math.max(0,Number(e.target.value)))}})]})]}),(0,s.jsxs)("div",{className:"rounded-lg border border-slate-800 bg-slate-950/60 p-4 text-xs text-slate-400",children:[(0,s.jsxs)("p",{children:["Current output: ",(0,s.jsx)("span",{className:"font-semibold text-slate-200",children:w.toFixed(1)})," kW"]}),(0,s.jsxs)("p",{className:"mt-1",children:["Ticks are emitted every ",(0,s.jsx)("span",{className:"font-semibold text-slate-200",children:"1 second"})," with ",(0,s.jsx)("span",{className:"font-semibold text-slate-200",children:"sample_seconds=30"}),". Fast-forward mode advances simulated time by 30 seconds per real second."]})]})]}),(0,s.jsx)(i.z,{variant:m?"danger":"primary",size:"md",onClick:m?x:u,disabled:g,className:"w-full",children:m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.Z,{className:"h-4 w-4","aria-hidden":"true"})," Stop manual run"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l,{className:"h-4 w-4","aria-hidden":"true"})," Start manual run"]})}),g&&f?(0,s.jsx)("p",{className:"text-xs text-warning",children:f}):null,(0,s.jsxs)("dl",{className:"grid grid-cols-2 gap-4 rounded-lg border border-slate-800 bg-slate-950/60 p-4 text-xs text-slate-400",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"uppercase tracking-[0.2em] text-slate-600",children:"Ticks sent"}),(0,s.jsx)("dd",{className:"mt-1 text-sm text-slate-200",children:h})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"uppercase tracking-[0.2em] text-slate-600",children:"Last tick"}),(0,s.jsx)("dd",{className:"mt-1 text-sm text-slate-200",children:j})]})]})]})}},74044:function(e,t,a){a.d(t,{V:function(){return i},o:function(){return c}});var s=a(2265),r=a(92800),l=a(46068);function n(e){let{simulatorId:t,intervalMs:a,mode:n,getTick:i,fastForwardEnabled:c=!1,onTickSent:d}=e,{push:o}=(0,l.p)(),[m,u]=(0,s.useState)(!1),[x,h]=(0,s.useState)(0),[p,g]=(0,s.useState)(void 0),f=(0,s.useRef)(null),w=(0,s.useRef)(0),j=(0,s.useRef)(()=>{}),v=(0,s.useRef)(null),b=(0,s.useRef)(i);(0,s.useEffect)(()=>{b.current=i},[i]);let N=(0,s.useCallback)(()=>{f.current&&(clearInterval(f.current),f.current=null),u(!1),v.current=null},[]),k=(0,s.useCallback)(async()=>{if(!t)return;let e=b.current();if(c){let t=new Date;if(v.current){let e=a/1e3*30;v.current=new Date(v.current.getTime()+1e3*e)}else v.current=new Date(t);e={...e,device_ts:v.current.toISOString()}}try{await (0,r.M8)({simulator_id:t,mode:n,ticks:[e]}),w.current=0,h(e=>e+1),g(e.device_ts),null==d||d(e);let a="recent_ticks_".concat(t),s=JSON.parse(localStorage.getItem(a)||"[]");s.push({ts:Date.now(),...e}),s.length>180&&s.shift(),localStorage.setItem(a,JSON.stringify(s))}catch(t){w.current+=1;let e=t instanceof Error?t.message:"Failed to deliver reading";1===w.current&&o({title:"Reading delivery failed",description:e,variant:"error"}),w.current>=3&&(N(),o({title:"Emitter paused",description:"Stopped ".concat(n," emitter after repeated failures."),variant:"error",action:{label:"Retry now",onClick:()=>j.current()}}))}},[c,a,n,d,o,t,N]),y=(0,s.useCallback)(async()=>{if(!t){o({title:"No simulator selected",description:"Create or pick a simulator before sending readings.",variant:"error"});return}if(!f.current){(0,r.Aq)(t).catch(e=>{console.warn("Failed to delete future readings:",e)});try{let e=await (0,r.he)(t);e&&c?v.current=new Date(e):c&&(v.current=new Date)}catch(e){console.warn("Failed to get last reading timestamp, starting from current time:",e),c&&(v.current=new Date)}w.current=0,u(!0),k(),f.current=setInterval(()=>{k()},a)}},[c,a,o,k,t]);return(0,s.useEffect)(()=>{j.current=y},[y]),(0,s.useEffect)(()=>()=>{f.current&&clearInterval(f.current)},[]),{isRunning:m,sentCount:x,lastSentAt:p,start:y,stop:N}}function i(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4?arguments[4]:void 0;return n({simulatorId:e,intervalMs:2e3,mode:"auto",getTick:(0,s.useCallback)(()=>({power_kw:Number(Math.max(0,t*(1+Math.max(0,Math.min(a,100))/100*(2*Math.random()-1))).toFixed(3)),sample_seconds:30,device_ts:new Date().toISOString()}),[t,a]),fastForwardEnabled:r,onTickSent:l})}function c(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;return n({simulatorId:e,intervalMs:2e3,mode:"manual",getTick:(0,s.useCallback)(()=>({power_kw:Number(Math.max(0,t()).toFixed(3)),sample_seconds:30,device_ts:new Date().toISOString()}),[t]),fastForwardEnabled:a,onTickSent:r})}},58151:function(e,t,a){var s=a(2265);let r=s.forwardRef(function(e,t){let{title:a,titleId:r,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"}))});t.Z=r}}]);