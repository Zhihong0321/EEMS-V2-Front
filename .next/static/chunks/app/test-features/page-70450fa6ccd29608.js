(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[508],{43295:function(e,t,r){Promise.resolve().then(r.bind(r,30269))},20357:function(e,t,r){"use strict";var s,a;e.exports=(null==(s=r.g.process)?void 0:s.env)&&"object"==typeof(null==(a=r.g.process)?void 0:a.env)?r.g.process:r(88081)},88081:function(e){!function(){var t={229:function(e){var t,r,s,a=e.exports={};function n(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:n}catch(e){t=n}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var l=[],c=!1,d=-1;function u(){c&&s&&(c=!1,s.length?l=s.concat(l):d=-1,l.length&&h())}function h(){if(!c){var e=o(u);c=!0;for(var t=l.length;t;){for(s=l,l=[];++d<t;)s&&s[d].run();d=-1,t=l.length}s=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function p(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new m(e,t)),1!==l.length||c||o(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=p,a.addListener=p,a.once=p,a.off=p,a.removeListener=p,a.removeAllListeners=p,a.emit=p,a.prependListener=p,a.prependOnceListener=p,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},r={};function s(e){var a=r[e];if(void 0!==a)return a.exports;var n=r[e]={exports:{}},i=!0;try{t[e](n,n.exports,s),i=!1}finally{i&&delete r[e]}return n.exports}s.ab="//";var a=s(229);e.exports=a}()},30269:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var s=r(57437),a=r(2265);async function n(e){try{let t=await fetch("/api/whatsapp/send",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({to:e.to,message:e.message})});if(!t.ok){let e=await t.json().catch(()=>({}));return{success:!1,error:e.error||"Failed to send message: ".concat(t.status," ").concat(t.statusText)}}let r=await t.json();return{success:r.success||!0,id:r.id,to:r.to,message:r.message||"Message sent successfully"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Network error occurred"}}}async function i(){try{let e=await fetch("/api/whatsapp/status",{method:"GET",headers:{Accept:"application/json"}}),t=await e.json();return{ready:!0===t.ready,hasQR:!0===t.hasQR}}catch(e){return{ready:!1,hasQR:!1}}}async function o(){try{let e=await fetch("/api/whatsapp/qr",{method:"GET",headers:{Accept:"application/json"}});return{qr:(await e.json()).qr||null}}catch(e){return{qr:null}}}var l=r(46068);let c=a.forwardRef(function(e,t){let{title:r,titleId:s,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}),d=a.forwardRef(function(e,t){let{title:r,titleId:s,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.348 14.652a3.75 3.75 0 0 1 0-5.304m5.304 0a3.75 3.75 0 0 1 0 5.304m-7.425 2.121a6.75 6.75 0 0 1 0-9.546m9.546 0a6.75 6.75 0 0 1 0 9.546M5.106 18.894c-3.808-3.807-3.808-9.98 0-13.788m13.788 0c3.808 3.807 3.808 9.98 0 13.788M12 12h.008v.008H12V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}),u=a.forwardRef(function(e,t){let{title:r,titleId:s,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5h.75v.75h-.75v-.75ZM13.5 19.5h.75v.75h-.75v-.75ZM19.5 13.5h.75v.75h-.75v-.75ZM19.5 19.5h.75v.75h-.75v-.75ZM16.5 16.5h.75v.75h-.75v-.75Z"}))});var h=r(20357);function m(){let{push:e}=(0,l.p)(),[t,r]=(0,a.useState)(""),[m,p]=(0,a.useState)(""),[x,f]=(0,a.useState)(!1),[b,v]=(0,a.useState)(null),[g,w]=(0,a.useState)(!1),[y,j]=(0,a.useState)(null),[N,k]=(0,a.useState)(!1),E=async()=>{if(!t.trim()||!m.trim()){e({title:"Validation Error",description:"Please enter both recipient number and message",variant:"error"});return}if(!/^\d{10,15}$/.test(t.trim())){e({title:"Invalid Phone Number",description:"Phone number must be 10-15 digits only (include country code, no symbols)",variant:"error"});return}f(!0);try{let r=await n({to:t.trim(),message:m.trim()});r.success?(e({title:"Message Sent",description:r.id?"Message sent with ID: ".concat(r.id):"WhatsApp message sent successfully",variant:"success"}),p("")):e({title:"Failed to Send",description:r.error||"Unknown error occurred",variant:"error"})}catch(t){e({title:"Error",description:t instanceof Error?t.message:"Failed to send message",variant:"error"})}finally{f(!1)}},C=async()=>{w(!0);try{let t=await i();v(t),e({title:"Status Checked",description:"WhatsApp is ".concat(t.ready?"ready":"not ready").concat(t.hasQR?" (QR code available)":""),variant:t.ready?"success":"warning"})}catch(t){e({title:"Error",description:t instanceof Error?t.message:"Failed to check status",variant:"error"})}finally{w(!1)}},T=async()=>{k(!0);try{let t=await o();j(t.qr),t.qr?e({title:"QR Code Retrieved",description:"Scan the QR code with WhatsApp to authenticate",variant:"success"}):e({title:"No QR Code",description:"QR code not available. WhatsApp might already be authenticated.",variant:"warning"})}catch(t){e({title:"Error",description:t instanceof Error?t.message:"Failed to get QR code",variant:"error"})}finally{k(!1)}};return(0,s.jsxs)("section",{className:"space-y-8",children:[(0,s.jsxs)("header",{children:[(0,s.jsx)("h1",{className:"text-3xl font-semibold text-white",children:"Test Features"}),(0,s.jsx)("p",{className:"text-sm text-slate-400 mt-2",children:"Test WhatsApp notification features and API integration"})]}),(0,s.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,s.jsxs)("article",{className:"rounded-2xl border border-slate-800 bg-slate-900/60 p-6",children:[(0,s.jsxs)("header",{className:"mb-6",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[(0,s.jsx)(c,{className:"h-6 w-6"}),"Send WhatsApp Message"]}),(0,s.jsx)("p",{className:"text-sm text-slate-400 mt-1",children:"Send a test message to a WhatsApp number"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Recipient Number"}),(0,s.jsx)("input",{type:"tel",value:t,onChange:e=>r(e.target.value),placeholder:"60123456789",className:"w-full rounded-md border border-slate-700 bg-slate-800 px-4 py-2 text-sm text-white placeholder:text-slate-500 focus:border-purple-400 focus:outline-none",disabled:x}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Country code + digits only (e.g., 60123456789 for Malaysia)"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Message"}),(0,s.jsx)("textarea",{value:m,onChange:e=>p(e.target.value),placeholder:"Enter your message here...",rows:5,className:"w-full rounded-md border border-slate-700 bg-slate-800 px-4 py-2 text-sm text-white placeholder:text-slate-500 focus:border-purple-400 focus:outline-none resize-none",disabled:x})]}),(0,s.jsx)("button",{onClick:E,disabled:x||!t.trim()||!m.trim(),className:"w-full rounded-md bg-primary px-4 py-2 text-sm font-medium text-white transition hover:bg-primary/90 disabled:cursor-not-allowed disabled:opacity-50 disabled:hover:bg-primary min-h-[44px]",children:x?"Sending...":"Send Message"})]})]}),(0,s.jsxs)("article",{className:"rounded-2xl border border-slate-800 bg-slate-900/60 p-6",children:[(0,s.jsxs)("header",{className:"mb-6",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[(0,s.jsx)(d,{className:"h-6 w-6"}),"WhatsApp Connection Status"]}),(0,s.jsx)("p",{className:"text-sm text-slate-400 mt-1",children:"Check WhatsApp connection status"})]}),(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{onClick:C,disabled:g,className:"w-full rounded-md border border-slate-700 bg-slate-800 px-4 py-2 text-sm font-medium text-slate-200 transition hover:bg-slate-700 disabled:cursor-not-allowed disabled:opacity-50 min-h-[44px]",children:g?"Checking...":"Check Connection Status"}),b&&(0,s.jsxs)("div",{className:"mt-3 rounded-md border border-slate-700 bg-slate-800/50 p-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-slate-300",children:"Ready:"}),(0,s.jsx)("span",{className:"text-sm font-medium ".concat(b.ready?"text-green-400":"text-red-400"),children:b.ready?"Yes":"No"})]}),(0,s.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-slate-300",children:"QR Available:"}),(0,s.jsx)("span",{className:"text-sm font-medium ".concat(b.hasQR?"text-yellow-400":"text-slate-400"),children:b.hasQR?"Yes":"No"})]})]})]})})]}),(0,s.jsxs)("article",{className:"rounded-2xl border border-slate-800 bg-slate-900/60 p-6",children:[(0,s.jsxs)("header",{className:"mb-6",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[(0,s.jsx)(u,{className:"h-6 w-6"}),"WhatsApp QR Code"]}),(0,s.jsx)("p",{className:"text-sm text-slate-400 mt-1",children:"Get QR code for WhatsApp authentication"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("button",{onClick:T,disabled:N,className:"w-full rounded-md border border-slate-700 bg-slate-800 px-4 py-2 text-sm font-medium text-slate-200 transition hover:bg-slate-700 disabled:cursor-not-allowed disabled:opacity-50 min-h-[44px]",children:N?"Loading...":"Get QR Code"}),y&&(0,s.jsxs)("div",{className:"mt-4 text-center",children:[(0,s.jsx)("img",{src:y,alt:"WhatsApp QR Code",className:"mx-auto max-w-full h-auto rounded-md border border-slate-700",style:{maxHeight:"200px"}}),(0,s.jsx)("p",{className:"text-xs text-slate-400 mt-2",children:"Scan with WhatsApp to authenticate"})]})]})]})]}),(0,s.jsxs)("div",{className:"rounded-lg border border-slate-800 bg-slate-900/60 p-4",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-slate-200 mb-2",children:"API Information"}),(0,s.jsxs)("div",{className:"text-xs text-slate-400 space-y-1",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Backend API:"})," ",h.env.NEXT_PUBLIC_WHATSAPP_API_URL||"https://whatsapp-api-server-production-c15f.up.railway.app"]}),(0,s.jsx)("p",{children:(0,s.jsx)("strong",{children:"Proxy Endpoints (CORS-free):"})}),(0,s.jsxs)("ul",{className:"list-disc list-inside ml-2 space-y-1",children:[(0,s.jsx)("li",{children:"POST /api/whatsapp/send - Send WhatsApp message"}),(0,s.jsx)("li",{children:"GET /api/whatsapp/status - Get connection status (ready, hasQR)"}),(0,s.jsx)("li",{children:"GET /api/whatsapp/qr - Get QR code for authentication"})]}),(0,s.jsxs)("p",{className:"mt-2",children:[(0,s.jsx)("strong",{children:"Phone Format:"})," Country code + digits only (e.g., 60123456789)"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Rate Limit:"})," Max 1 message per second"]})]})]})]})}},46068:function(e,t,r){"use strict";r.d(t,{ToastProvider:function(){return h},p:function(){return m}});var s=r(57437),a=r(2265),n=r(85130),i=r(39519),o=r(11853),l=r(13934),c=r(84573),d=r(44839);let u=(0,a.createContext)(void 0);function h(e){let{children:t}=e,[r,n]=(0,a.useState)([]),i=(0,a.useCallback)(e=>{let t="".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2,8));return n(r=>[...r,{...e,id:t}]),setTimeout(()=>{n(e=>e.filter(e=>e.id!==t))},5e3),t},[]),o=(0,a.useCallback)(e=>{n(t=>t.filter(t=>t.id!==e))},[]),l=(0,a.useCallback)(()=>n([]),[]),c=(0,a.useMemo)(()=>({toasts:r,push:i,dismiss:o,clear:l}),[r,i,o,l]);return(0,s.jsxs)(u.Provider,{value:c,children:[t,(0,s.jsx)(p,{toasts:r,onDismiss:o})]})}function m(){let e=(0,a.useContext)(u);if(!e)throw Error("useToast must be used within a ToastProvider");return e}function p(e){let{toasts:t,onDismiss:r}=e;return(0,s.jsx)("div",{className:"pointer-events-none fixed inset-x-0 bottom-0 sm:top-20 sm:bottom-auto z-50 flex flex-col items-center sm:items-end gap-3 px-4 sm:px-6 pb-6 sm:pb-0","aria-live":"polite","aria-atomic":"true",children:t.map(e=>(0,s.jsx)(x,{toast:e,onDismiss:r},e.id))})}function x(e){var t,r;let{toast:u,onDismiss:h}=e,[m,p]=(0,a.useState)(!1),x=null!==(t=u.variant)&&void 0!==t?t:"default";(0,a.useEffect)(()=>{requestAnimationFrame(()=>p(!0))},[]);let f=()=>{p(!1),setTimeout(()=>h(u.id),200)},b="success"===x?n.Z:"error"===x?i.Z:"warning"===x?o.Z:l.Z;return(0,s.jsx)("div",{className:(0,d.Z)("pointer-events-auto w-full max-w-sm rounded-xl px-4 py-3 shadow-2xl border backdrop-blur-md transition-all duration-300 ease-out","success"===x?"bg-success/95 text-white border-success/20":"error"===x?"bg-danger/95 text-white border-danger/20":"warning"===x?"bg-warning/95 text-white border-warning/20":"bg-slate-800/95 text-white border-slate-700/20",m?"translate-y-0 opacity-100":"translate-y-2 sm:translate-y-0 sm:translate-x-4 opacity-0"),role:"alert","aria-live":"assertive",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(b,{className:"h-5 w-5 flex-shrink-0 mt-0.5","aria-hidden":"true"}),(0,s.jsxs)("div",{className:"flex-1 space-y-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-semibold leading-tight",children:u.title}),u.description&&(0,s.jsx)("p",{className:"text-xs leading-tight opacity-90",children:u.description}),u.action&&(0,s.jsx)("button",{type:"button",onClick:()=>{var e;null===(e=u.action)||void 0===e||e.onClick(),f()},className:"mt-2 inline-flex rounded-md border border-current/30 px-3 py-1.5 text-xs font-semibold transition hover:border-current hover:bg-white/10",children:u.action.label})]}),(null===(r=u.dismissible)||void 0===r||r)&&(0,s.jsx)("button",{type:"button",onClick:f,className:"flex-shrink-0 rounded-md p-1 transition hover:bg-white/10","aria-label":"Dismiss notification",children:(0,s.jsx)(c.Z,{className:"h-5 w-5","aria-hidden":"true"})})]})})}},85130:function(e,t,r){"use strict";var s=r(2265);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});t.Z=a},11853:function(e,t,r){"use strict";var s=r(2265);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))});t.Z=a},13934:function(e,t,r){"use strict";var s=r(2265);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))});t.Z=a},39519:function(e,t,r){"use strict";var s=r(2265);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});t.Z=a},84573:function(e,t,r){"use strict";var s=r(2265);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))});t.Z=a},44839:function(e,t,r){"use strict";t.Z=function(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=function e(t){var r,s,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t){if(Array.isArray(t)){var n=t.length;for(r=0;r<n;r++)t[r]&&(s=e(t[r]))&&(a&&(a+=" "),a+=s)}else for(s in t)t[s]&&(a&&(a+=" "),a+=s)}return a}(e))&&(s&&(s+=" "),s+=t);return s}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=43295)}),_N_E=e.O()}]);