(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[998],{71536:function(e,t,n){Promise.resolve().then(n.bind(n,15521))},20357:function(e,t,n){"use strict";var s,r;e.exports=(null==(s=n.g.process)?void 0:s.env)&&"object"==typeof(null==(r=n.g.process)?void 0:r.env)?n.g.process:n(88081)},88081:function(e){!function(){var t={229:function(e){var t,n,s,r=e.exports={};function i(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var l=[],u=!1,c=-1;function d(){u&&s&&(u=!1,s.length?l=s.concat(l):c=-1,l.length&&m())}function m(){if(!u){var e=o(d);u=!0;for(var t=l.length;t;){for(s=l,l=[];++c<t;)s&&s[c].run();c=-1,t=l.length}s=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function f(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new h(e,t)),1!==l.length||u||o(m)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=f,r.addListener=f,r.once=f,r.off=f,r.removeListener=f,r.removeAllListeners=f,r.emit=f,r.prependListener=f,r.prependOnceListener=f,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},n={};function s(e){var r=n[e];if(void 0!==r)return r.exports;var i=n[e]={exports:{}},a=!0;try{t[e](i,i.exports,s),a=!1}finally{a&&delete n[e]}return i.exports}s.ab="//";var r=s(229);e.exports=r}()},15521:function(e,t,n){"use strict";n.d(t,{SimulatorRunContent:function(){return u}});var s=n(57437),r=n(2265),i=n(87138),a=n(84686),o=n(17166),l=n(74044);function u(e){let{simulatorId:t,simulatorName:n,targetKwh:u}=e,[c,d]=(0,r.useState)(320),[m,h]=(0,r.useState)(12),[f,p]=(0,r.useState)(.5),[x,b]=(0,r.useState)(800),v=(0,r.useMemo)(()=>f*x,[f,x]),g=(0,l.V)(t,c,m),w=(0,l.o)(t,()=>v),y=()=>{g.isRunning?g.stop():(w.stop(),g.start())},j=()=>{w.isRunning?w.stop():(g.stop(),w.start())};return(0,s.jsxs)("section",{className:"space-y-10",children:[(0,s.jsxs)("header",{className:"flex flex-wrap items-end justify-between gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-500",children:"Simulator controls"}),(0,s.jsx)("h1",{className:"text-3xl font-semibold text-white",children:n}),(0,s.jsx)("p",{className:"text-sm text-slate-400",children:"Configure auto and manual emitters. Only one mode can run at a time to avoid duplicate ticks."}),(0,s.jsxs)("p",{className:"text-xs text-slate-500",children:["Target block: ",u?"".concat(u," kWh"):"â€”"," \xb7 Timezone ","Asia/Kuala_Lumpur"]})]}),(0,s.jsx)(i.default,{href:{pathname:"/sim/[id]",query:{id:t}},className:"inline-flex items-center rounded-md border border-slate-700 px-4 py-2 text-sm font-semibold text-slate-200 transition hover:border-slate-500 hover:text-white",children:"Back to dashboard"})]}),(0,s.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,s.jsx)(a.l,{baseKw:c,onBaseKwChange:d,volatility:m,onVolatilityChange:h,isRunning:g.isRunning,onStart:y,onStop:y,sentCount:g.sentCount,lastSentAt:g.lastSentAt,disabled:w.isRunning,disabledReason:w.isRunning?"Manual emitter is active. Stop it before running auto mode.":void 0}),(0,s.jsx)(o.x,{sliderValue:f,onSliderChange:p,maxKw:x,onMaxKwChange:b,isRunning:w.isRunning,onStart:j,onStop:j,sentCount:w.sentCount,lastSentAt:w.lastSentAt,disabled:g.isRunning,disabledReason:g.isRunning?"Auto emitter is active. Stop it before running manual mode.":void 0})]}),(0,s.jsxs)("p",{className:"text-xs text-slate-500",children:["Auto mode sends gaussianised readings every 15 seconds; manual fast-forward emits every second with ",(0,s.jsx)("code",{className:"rounded bg-slate-800 px-1 py-0.5",children:"sample_seconds=30"})," so the backend advances by 30 seconds per tick (30x speed)."]})]})}},46068:function(e,t,n){"use strict";n.d(t,{ToastProvider:function(){return m},p:function(){return h}});var s=n(57437),r=n(2265),i=n(85130),a=n(39519),o=n(11853),l=n(13934),u=n(84573),c=n(44839);let d=(0,r.createContext)(void 0);function m(e){let{children:t}=e,[n,i]=(0,r.useState)([]),a=(0,r.useCallback)(e=>{let t="".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2,8));return i(n=>[...n,{...e,id:t}]),setTimeout(()=>{i(e=>e.filter(e=>e.id!==t))},5e3),t},[]),o=(0,r.useCallback)(e=>{i(t=>t.filter(t=>t.id!==e))},[]),l=(0,r.useCallback)(()=>i([]),[]),u=(0,r.useMemo)(()=>({toasts:n,push:a,dismiss:o,clear:l}),[n,a,o,l]);return(0,s.jsxs)(d.Provider,{value:u,children:[t,(0,s.jsx)(f,{toasts:n,onDismiss:o})]})}function h(){let e=(0,r.useContext)(d);if(!e)throw Error("useToast must be used within a ToastProvider");return e}function f(e){let{toasts:t,onDismiss:n}=e;return(0,s.jsx)("div",{className:"pointer-events-none fixed inset-x-0 bottom-0 sm:top-20 sm:bottom-auto z-50 flex flex-col items-center sm:items-end gap-3 px-4 sm:px-6 pb-6 sm:pb-0","aria-live":"polite","aria-atomic":"true",children:t.map(e=>(0,s.jsx)(p,{toast:e,onDismiss:n},e.id))})}function p(e){var t,n;let{toast:d,onDismiss:m}=e,[h,f]=(0,r.useState)(!1),p=null!==(t=d.variant)&&void 0!==t?t:"default";(0,r.useEffect)(()=>{requestAnimationFrame(()=>f(!0))},[]);let x=()=>{f(!1),setTimeout(()=>m(d.id),200)},b="success"===p?i.Z:"error"===p?a.Z:"warning"===p?o.Z:l.Z;return(0,s.jsx)("div",{className:(0,c.Z)("pointer-events-auto w-full max-w-sm rounded-xl px-4 py-3 shadow-2xl border backdrop-blur-md transition-all duration-300 ease-out","success"===p?"bg-success/95 text-white border-success/20":"error"===p?"bg-danger/95 text-white border-danger/20":"warning"===p?"bg-warning/95 text-white border-warning/20":"bg-slate-800/95 text-white border-slate-700/20",h?"translate-y-0 opacity-100":"translate-y-2 sm:translate-y-0 sm:translate-x-4 opacity-0"),role:"alert","aria-live":"assertive",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(b,{className:"h-5 w-5 flex-shrink-0 mt-0.5","aria-hidden":"true"}),(0,s.jsxs)("div",{className:"flex-1 space-y-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-semibold leading-tight",children:d.title}),d.description&&(0,s.jsx)("p",{className:"text-xs leading-tight opacity-90",children:d.description}),d.action&&(0,s.jsx)("button",{type:"button",onClick:()=>{var e;null===(e=d.action)||void 0===e||e.onClick(),x()},className:"mt-2 inline-flex rounded-md border border-current/30 px-3 py-1.5 text-xs font-semibold transition hover:border-current hover:bg-white/10",children:d.action.label})]}),(null===(n=d.dismissible)||void 0===n||n)&&(0,s.jsx)("button",{type:"button",onClick:x,className:"flex-shrink-0 rounded-md p-1 transition hover:bg-white/10","aria-label":"Dismiss notification",children:(0,s.jsx)(u.Z,{className:"h-5 w-5","aria-hidden":"true"})})]})})}}},function(e){e.O(0,[462,836,260,971,23,744],function(){return e(e.s=71536)}),_N_E=e.O()}]);