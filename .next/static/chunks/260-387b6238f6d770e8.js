"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[260],{84686:function(e,t,s){s.d(t,{l:function(){return u}});var a=s(57437),r=s(2265);let l=r.forwardRef(function(e,t){let{title:s,titleId:a,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"}))});var n=s(58151);let i=r.forwardRef(function(e,t){let{title:s,titleId:a,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))});var c=s(44839);let d=new Intl.NumberFormat(void 0,{maximumFractionDigits:0}),o=new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit"});function u(e){let{baseKw:t,onBaseKwChange:s,volatility:r,onVolatilityChange:u,isRunning:m,onStart:x,onStop:h,sentCount:p,lastSentAt:f,disabled:g,disabledReason:b}=e,w=f?o.format(new Date(f)):"—";return(0,a.jsxs)("article",{className:"flex flex-col gap-6 rounded-2xl border border-slate-800 bg-slate-900/60 p-6",children:[(0,a.jsxs)("header",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Auto mode"}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Emit one tick every second with gaussian noise. Fast-forward mode advances simulated time by 30 seconds per real second."})]}),(0,a.jsx)(l,{className:"h-8 w-8 text-cyan-500","aria-hidden":"true"})]}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-sm",children:[(0,a.jsx)("span",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Base kW"}),(0,a.jsx)("input",{type:"number",min:0,step:1,value:t,onChange:e=>{s(Number(e.target.value))},className:"w-full rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-white focus:border-cyan-500 focus:outline-none"})]}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-sm",children:[(0,a.jsx)("span",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Volatility %"}),(0,a.jsx)("input",{type:"number",min:0,max:100,step:1,value:r,onChange:e=>{u(Math.max(0,Math.min(100,Number(e.target.value))))},className:"w-full rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-white focus:border-cyan-500 focus:outline-none"})]})]}),(0,a.jsxs)("div",{className:"rounded-lg border border-slate-800 bg-slate-950/60 p-4 text-xs text-slate-400",children:[(0,a.jsxs)("p",{children:["Next tick interval: ",(0,a.jsx)("span",{className:"font-semibold text-slate-200",children:"1 second"})]}),(0,a.jsxs)("p",{className:"mt-1",children:["Expected power window: ",(0,a.jsx)("span",{className:"font-semibold text-slate-200",children:d.format(Math.max(0,Math.round(t*(1-r/100))))})," – "," ",(0,a.jsx)("span",{className:"font-semibold text-slate-200",children:d.format(Math.round(t*(1+r/100)))})," kW"]})]}),(0,a.jsx)("button",{type:"button",onClick:m?h:x,disabled:g,className:(0,c.Z)("inline-flex items-center justify-center gap-2 rounded-md px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",g?"cursor-not-allowed bg-slate-800/60 text-slate-500":m?"bg-danger/80 text-white hover:bg-danger":"bg-primary text-primary-foreground hover:bg-cyan-600"),children:m?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.Z,{className:"h-4 w-4","aria-hidden":"true"})," Stop auto run"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i,{className:"h-4 w-4","aria-hidden":"true"})," Start auto run"]})}),g&&b?(0,a.jsx)("p",{className:"text-xs text-warning",children:b}):null,(0,a.jsxs)("dl",{className:"grid grid-cols-2 gap-4 rounded-lg border border-slate-800 bg-slate-950/60 p-4 text-xs text-slate-400",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"uppercase tracking-[0.2em] text-slate-600",children:"Ticks sent"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-slate-200",children:p})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"uppercase tracking-[0.2em] text-slate-600",children:"Last tick"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-slate-200",children:w})]})]})]})}},17166:function(e,t,s){s.d(t,{x:function(){return d}});var a=s(57437),r=s(2265);let l=r.forwardRef(function(e,t){let{title:s,titleId:a,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.59 14.37a6 6 0 0 1-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 0 0 6.16-12.12A14.98 14.98 0 0 0 9.631 8.41m5.96 5.96a14.926 14.926 0 0 1-5.841 2.58m-.119-8.54a6 6 0 0 0-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 0 0-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 0 1-2.448-2.448 14.9 14.9 0 0 1 .06-.312m-2.24 2.39a4.493 4.493 0 0 0-1.757 4.306 4.493 4.493 0 0 0 4.306-1.758M16.5 9a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"}))});var n=s(58151),i=s(44839);let c=new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit"});function d(e){let{sliderValue:t,onSliderChange:s,maxKw:r,onMaxKwChange:d,isRunning:o,onStart:u,onStop:m,sentCount:x,lastSentAt:h,disabled:p,disabledReason:f}=e,g=Math.max(0,t*r),b=h?c.format(new Date(h)):"—";return(0,a.jsxs)("article",{className:"flex flex-col gap-6 rounded-2xl border border-slate-800 bg-slate-900/60 p-6",children:[(0,a.jsxs)("header",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Manual fast-forward"}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Emit one tick per second using the selected power multiplier."})]}),(0,a.jsx)(l,{className:"h-8 w-8 text-purple-400","aria-hidden":"true"})]}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-[minmax(0,2fr)_1fr]",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-sm",children:[(0,a.jsx)("span",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Adjust load multiplier"}),(0,a.jsx)("input",{type:"range",min:0,max:1,step:.01,value:t,onChange:e=>{s(Number(e.target.value))},className:"w-full"}),(0,a.jsxs)("span",{className:"text-xs text-slate-400",children:["FAST-FORWARD x30 — Multiplier ",(100*t).toFixed(0),"%"]})]}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-sm",children:[(0,a.jsx)("span",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Max power (kW)"}),(0,a.jsx)("input",{type:"number",min:0,step:5,value:r,onChange:e=>{d(Math.max(0,Number(e.target.value)))},className:"w-full rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-white focus:border-purple-400 focus:outline-none"})]})]}),(0,a.jsxs)("div",{className:"rounded-lg border border-slate-800 bg-slate-950/60 p-4 text-xs text-slate-400",children:[(0,a.jsxs)("p",{children:["Current output: ",(0,a.jsx)("span",{className:"font-semibold text-slate-200",children:g.toFixed(1)})," kW"]}),(0,a.jsxs)("p",{className:"mt-1",children:["Ticks are emitted every ",(0,a.jsx)("span",{className:"font-semibold text-slate-200",children:"1 second"})," with ",(0,a.jsx)("span",{className:"font-semibold text-slate-200",children:"sample_seconds=30"}),". Fast-forward mode advances simulated time by 30 seconds per real second."]})]})]}),(0,a.jsx)("button",{type:"button",onClick:o?m:u,disabled:p,className:(0,i.Z)("inline-flex items-center justify-center gap-2 rounded-md px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",p?"cursor-not-allowed bg-slate-800/60 text-slate-500":o?"bg-danger/80 text-white hover:bg-danger":"bg-primary text-primary-foreground hover:bg-cyan-600"),children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.Z,{className:"h-4 w-4","aria-hidden":"true"})," Stop manual run"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l,{className:"h-4 w-4","aria-hidden":"true"})," Start manual run"]})}),p&&f?(0,a.jsx)("p",{className:"text-xs text-warning",children:f}):null,(0,a.jsxs)("dl",{className:"grid grid-cols-2 gap-4 rounded-lg border border-slate-800 bg-slate-950/60 p-4 text-xs text-slate-400",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"uppercase tracking-[0.2em] text-slate-600",children:"Ticks sent"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-slate-200",children:x})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"uppercase tracking-[0.2em] text-slate-600",children:"Last tick"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-slate-200",children:b})]})]})]})}},74044:function(e,t,s){s.d(t,{V:function(){return i},o:function(){return c}});var a=s(2265),r=s(92800),l=s(46068);function n(e){let{simulatorId:t,intervalMs:s,mode:n,getTick:i,fastForwardEnabled:c=!1,onTickSent:d}=e,{push:o}=(0,l.p)(),[u,m]=(0,a.useState)(!1),[x,h]=(0,a.useState)(0),[p,f]=(0,a.useState)(void 0),g=(0,a.useRef)(null),b=(0,a.useRef)(0),w=(0,a.useRef)(()=>{}),j=(0,a.useRef)(null),v=(0,a.useRef)(i);(0,a.useEffect)(()=>{v.current=i},[i]);let N=(0,a.useCallback)(()=>{g.current&&(clearInterval(g.current),g.current=null),m(!1),j.current=null},[]),k=(0,a.useCallback)(async()=>{if(!t)return;let e=v.current();if(c){let t=new Date;if(j.current){let e=s/1e3*30;j.current=new Date(j.current.getTime()+1e3*e)}else j.current=new Date(t);e={...e,device_ts:j.current.toISOString()}}try{await (0,r.M8)({simulator_id:t,mode:n,ticks:[e]}),b.current=0,h(e=>e+1),f(e.device_ts),null==d||d(e);let s="recent_ticks_".concat(t),a=JSON.parse(localStorage.getItem(s)||"[]");a.push({ts:Date.now(),...e}),a.length>180&&a.shift(),localStorage.setItem(s,JSON.stringify(a))}catch(t){b.current+=1;let e=t instanceof Error?t.message:"Failed to deliver reading";1===b.current&&o({title:"Reading delivery failed",description:e,variant:"error"}),b.current>=3&&(N(),o({title:"Emitter paused",description:"Stopped ".concat(n," emitter after repeated failures."),variant:"error",action:{label:"Retry now",onClick:()=>w.current()}}))}},[c,s,n,d,o,t,N]),y=(0,a.useCallback)(async()=>{if(!t){o({title:"No simulator selected",description:"Create or pick a simulator before sending readings.",variant:"error"});return}if(!g.current){(0,r.Aq)(t).catch(e=>{console.warn("Failed to delete future readings:",e)});try{let e=await (0,r.he)(t);e&&c?j.current=new Date(e):c&&(j.current=new Date)}catch(e){console.warn("Failed to get last reading timestamp, starting from current time:",e),c&&(j.current=new Date)}b.current=0,m(!0),k(),g.current=setInterval(()=>{k()},s)}},[c,s,o,k,t]);return(0,a.useEffect)(()=>{w.current=y},[y]),(0,a.useEffect)(()=>()=>{g.current&&clearInterval(g.current)},[]),{isRunning:u,sentCount:x,lastSentAt:p,start:y,stop:N}}function i(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4?arguments[4]:void 0;return n({simulatorId:e,intervalMs:2e3,mode:"auto",getTick:(0,a.useCallback)(()=>({power_kw:Number(Math.max(0,t*(1+Math.max(0,Math.min(s,100))/100*(2*Math.random()-1))).toFixed(3)),sample_seconds:30,device_ts:new Date().toISOString()}),[t,s]),fastForwardEnabled:r,onTickSent:l})}function c(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;return n({simulatorId:e,intervalMs:2e3,mode:"manual",getTick:(0,a.useCallback)(()=>({power_kw:Number(Math.max(0,t()).toFixed(3)),sample_seconds:30,device_ts:new Date().toISOString()}),[t]),fastForwardEnabled:s,onTickSent:r})}},58151:function(e,t,s){var a=s(2265);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"}))});t.Z=r}}]);