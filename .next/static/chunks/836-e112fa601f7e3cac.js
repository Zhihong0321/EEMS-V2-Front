"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[836],{89733:function(e,t,n){n.d(t,{z:function(){return l}});var r=n(57437),a=n(2265),o=n(44839);let i={primary:"bg-primary text-white shadow-sm hover:bg-cyan-600 hover:shadow-md active:scale-95",secondary:"border border-slate-700 bg-transparent text-slate-200 hover:bg-slate-800 hover:border-slate-600",ghost:"hover:bg-slate-800/50 text-slate-300 hover:text-white",danger:"bg-danger text-white shadow-sm hover:bg-red-600 hover:shadow-md active:scale-95",success:"bg-success text-white shadow-sm hover:bg-green-600 hover:shadow-md active:scale-95"},s={sm:"px-3 py-1.5 text-xs min-h-[36px]",md:"px-4 py-2 text-sm min-h-[44px]",lg:"px-6 py-3 text-base min-h-[48px]"},l=(0,a.forwardRef)((e,t)=>{let{className:n,variant:a="primary",size:l="md",isLoading:c,children:u,disabled:d,...f}=e;return(0,r.jsxs)("button",{className:(0,o.Z)("inline-flex items-center justify-center gap-2 rounded-md font-semibold transition-all duration-150","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950","disabled:pointer-events-none disabled:opacity-50",i[a],s[l],n),ref:t,disabled:d||c,...f,children:[c&&(0,r.jsxs)("svg",{className:"h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,r.jsx)("span",{className:c?"opacity-70":"",children:u})]})});l.displayName="Button"},77209:function(e,t,n){n.d(t,{II:function(){return s},Ph:function(){return l},SP:function(){return c}});var r=n(57437),a=n(2265),o=n(44839),i=n(11853);let s=(0,a.forwardRef)((e,t)=>{let{className:n,error:a,success:i,...s}=e;return(0,r.jsx)("input",{className:(0,o.Z)("w-full rounded-md border px-3 py-2 text-sm text-white transition-colors duration-150","placeholder:text-slate-500","focus:outline-none focus:ring-2","disabled:opacity-50 disabled:cursor-not-allowed",a?"border-danger bg-danger/5 focus:border-danger focus:ring-danger/20":i?"border-success bg-success/5 focus:border-success focus:ring-success/20":"border-slate-800 bg-slate-950/60 focus:border-primary focus:ring-primary/20",n),ref:t,...s})});s.displayName="Input";let l=(0,a.forwardRef)((e,t)=>{let{className:n,error:a,success:i,children:s,...l}=e;return(0,r.jsx)("select",{className:(0,o.Z)("w-full rounded-md border px-3 py-2 text-sm text-white transition-colors duration-150","focus:outline-none focus:ring-2","disabled:opacity-50 disabled:cursor-not-allowed",a?"border-danger bg-danger/5 focus:border-danger focus:ring-danger/20":i?"border-success bg-success/5 focus:border-success focus:ring-success/20":"border-slate-800 bg-slate-950/60 focus:border-primary focus:ring-primary/20",n),ref:t,...l,children:s})});function c(e){let{label:t,error:n,helperText:a,required:o,children:s}=e;return(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-slate-300",children:[t,o&&(0,r.jsx)("span",{className:"text-danger ml-1",children:"*"})]}),s,n&&(0,r.jsxs)("p",{className:"text-xs text-danger flex items-center gap-1",children:[(0,r.jsx)(i.Z,{className:"h-4 w-4","aria-hidden":"true"}),n]}),!n&&a&&(0,r.jsx)("p",{className:"text-xs text-slate-500",children:a})]})}l.displayName="Select"},8374:function(e,t,n){n.d(t,{$T:function(){return h},Dr:function(){return d},HM:function(){return p},Oz:function(){return v},Qu:function(){return g},tQ:function(){return w},w:function(){return y},wC:function(){return m},wE:function(){return f}});var r=n(20357);let a="eems.apiKeyOverride",o=[{name:"NEXT_PUBLIC_BACKEND_TOKEN",value:"01121000099"},{name:"NEXT_PUBLIC_BACKEND_WRITE_TOKEN",value:r.env.NEXT_PUBLIC_BACKEND_WRITE_TOKEN},{name:"NEXT_PUBLIC_BACKEND_KEY",value:r.env.NEXT_PUBLIC_BACKEND_KEY},{name:"NEXT_PUBLIC_BACKEND_API_KEY",value:r.env.NEXT_PUBLIC_BACKEND_API_KEY}],i=null,s=!1,l=!1;function c(){if(!s){s=!0;try{let e=window.localStorage.getItem(a);e&&(i=e,l=!0)}catch(e){}}}function u(){for(let e of o)if(e.value)return{name:e.name,value:e.value};return null}function d(){var e,t;return null!==(t=null===(e=u())||void 0===e?void 0:e.value)&&void 0!==t?t:""}function f(){var e,t;return null!==(t=null===(e=u())||void 0===e?void 0:e.name)&&void 0!==t?t:null}function h(){return c(),i}function m(){return c(),l&&!!i}function v(e,t){i=e.trim()||null,l=!!((null==t?void 0:t.persist)&&i);try{l&&i?window.localStorage.setItem(a,i):window.localStorage.removeItem(a)}catch(e){}}function p(){i=null,l=!1;try{window.localStorage.removeItem(a)}catch(e){}}function y(){return h()||d()}function g(){return y().length>0}function w(){return d().length>0}},92800:function(e,t,n){n.d(t,{Aq:function(){return x},Bj:function(){return m},CT:function(){return a},LK:function(){return h},M8:function(){return b},Mf:function(){return v},QY:function(){return w},aj:function(){return y},b0:function(){return f},he:function(){return N},ji:function(){return p},lA:function(){return g}});var r=n(8374);let a="/api/bridge",o=new Set([429,500,502,503,504]);class i extends Error{constructor(e,t,n,r){super(e),this.status=t,this.code=n,this.details=r}}function s(e){if(!a)throw new i("Backend base URL is not configured.",0);return e.startsWith("http")?e:"".concat(a).concat(e)}async function l(e){let t=await e.text();if(t)try{return JSON.parse(t)}catch(t){throw new i("Invalid JSON response: ".concat(t.message),e.status)}}async function c(e){var t,n,r,a,o,s;let l;try{l=await e.clone().json()}catch(e){}if(!l)try{let t=await e.text();if(t)return new i(t,e.status)}catch(e){}let c=null!==(s=null!==(o=null!==(a=null==l?void 0:null===(t=l.error)||void 0===t?void 0:t.message)&&void 0!==a?a:null==l?void 0:l.message)&&void 0!==o?o:e.statusText)&&void 0!==s?s:"Request failed with status ".concat(e.status),u=null==l?void 0:null===(n=l.error)||void 0===n?void 0:n.code,d=null==l?void 0:null===(r=l.error)||void 0===r?void 0:r.details;if(l&&l.detail){d=l.detail;try{if(Array.isArray(l.detail)){let e=l.detail.map(e=>(null==e?void 0:e.msg)||(null==e?void 0:e.detail)||"Validation error").filter(Boolean);e.length>0&&(c=e.join("; "))}else"string"==typeof l.detail&&(c=l.detail)}catch(e){}}return new i(c,e.status,u,d)}function u(e){return new Promise(t=>setTimeout(t,e))}async function d(e,t){var n,r;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=s(e),f=null!==(n=a.retryDelays)&&void 0!==n?n:[],h=0,m=new Headers(null==t?void 0:t.headers);m.set("Accept","application/json");let v={...t,headers:m};for(;;)try{let e=await fetch(d,v);if(!e.ok){let t=await c(e);if(r=e.status,o.has(r)&&h<f.length){await u(f[h++]);continue}throw t}if(204===e.status)return;return await l(e)}catch(e){if(e instanceof i)throw e;if(h<f.length){await u(f[h++]);continue}throw e}}function f(e){let t=new Headers(null==e?void 0:e.headers);t.set("Content-Type","application/json");let n=(0,r.w)();return n?t.set("x-api-key",n):t.delete("x-api-key"),{...e,headers:t}}async function h(e,t){try{return await d(e,t)}catch(n){if(!(n instanceof i))return await d(e,t,{retryDelays:[500]});throw n}}function m(e){return s(e)}async function v(){var e;let t=await h("/api/v1/simulators");return Array.isArray(t)?t:null!==(e=t.data)&&void 0!==e?e:[]}async function p(e){let t=await d("/api/v1/simulators",f({method:"POST",body:JSON.stringify(e)}),{retryDelays:[500,1500,3500]});return"data"in t?t.data:t}async function y(e){console.log("deleteSimulator called with id:",e);try{await d("/api/v1/simulators/".concat(e),f({method:"DELETE"}),{retryDelays:[500,1500]}),console.log("deleteSimulator successful for id:",e)}catch(t){throw console.error("deleteSimulator error for id:",e,t),t}}async function g(e){return await h("/api/v1/blocks/latest?simulator_id=".concat(encodeURIComponent(e)))}async function w(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=await h("/api/v1/blocks/history?simulator_id=".concat(encodeURIComponent(e),"&limit=").concat(n));return Array.isArray(r)?r:null!==(t=r.data)&&void 0!==t?t:[]}async function b(e){await d("/api/v1/readings:ingest",f({method:"POST",body:JSON.stringify(e)}),{retryDelays:[500,1500,3500]})}async function x(e){try{let t=new Date().toISOString();await d("/api/v1/readings?simulator_id=".concat(encodeURIComponent(e),"&before=").concat(encodeURIComponent(t)),f({method:"DELETE"}),{retryDelays:[500,1500]})}catch(t){try{await d("/api/v1/simulators/".concat(encodeURIComponent(e),"/readings"),f({method:"DELETE"}),{retryDelays:[500,1500]})}catch(e){console.warn("Failed to delete future readings from backend:",t,e)}}}async function N(e){try{var t;let n=await g(e);if((null===(t=n.chart_bins)||void 0===t?void 0:t.points)&&n.chart_bins.points.length>0){let e=new Date(n.block_start_local),t=n.chart_bins.bin_seconds||30,r=n.chart_bins.points.length;return new Date(e.getTime()+r*t*1e3).toISOString()}return null}catch(e){return console.warn("Failed to fetch last reading timestamp:",e),null}}}}]);